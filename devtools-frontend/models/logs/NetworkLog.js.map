{"version":3,"file":"NetworkLog.js","sourceRoot":"","sources":["../../../../../../front_end/models/logs/NetworkLog.ts"],"names":[],"mappings":"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","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nconst UIStrings = {\n  /**\n   * @description When DevTools doesn't know the URL that initiated a network request, we\n   * show this phrase instead. 'unknown' would also work in this context.\n   */\n  anonymous: '<anonymous>',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/logs/NetworkLog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet networkLogInstance: NetworkLog;\n\nexport class NetworkLog extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    SDK.TargetManager.SDKModelObserver<SDK.NetworkManager.NetworkManager> {\n  private requestsInternal: SDK.NetworkRequest.NetworkRequest[];\n  private sentNetworkRequests: Protocol.Network.Request[];\n  private receivedNetworkResponses: Protocol.Network.Response[];\n  private requestsSet: Set<SDK.NetworkRequest.NetworkRequest>;\n  private readonly requestsMap: Map<string, SDK.NetworkRequest.NetworkRequest[]>;\n  private readonly pageLoadForManager: Map<SDK.NetworkManager.NetworkManager, SDK.PageLoad.PageLoad>;\n  private isRecording: boolean;\n  private readonly modelListeners: WeakMap<SDK.NetworkManager.NetworkManager, Common.EventTarget.EventDescriptor[]>;\n  private readonly initiatorData: WeakMap<SDK.NetworkRequest.NetworkRequest, InitiatorData>;\n  private readonly unresolvedPreflightRequests: Map<string, SDK.NetworkRequest.NetworkRequest>;\n\n  constructor() {\n    super();\n    this.requestsInternal = [];\n    this.sentNetworkRequests = [];\n    this.receivedNetworkResponses = [];\n    this.requestsSet = new Set();\n    this.requestsMap = new Map();\n    this.pageLoadForManager = new Map();\n    this.isRecording = true;\n    this.modelListeners = new WeakMap();\n    this.initiatorData = new WeakMap();\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.NetworkManager.NetworkManager, this);\n    const recordLogSetting: Common.Settings.Setting<boolean> =\n        Common.Settings.Settings.instance().moduleSetting('network_log.record-log');\n    recordLogSetting.addChangeListener(() => {\n      const preserveLogSetting = Common.Settings.Settings.instance().moduleSetting('network_log.preserve-log');\n      if (!preserveLogSetting.get() && recordLogSetting.get()) {\n        this.reset(true);\n      }\n      this.setIsRecording((recordLogSetting.get() as boolean));\n    }, this);\n    this.unresolvedPreflightRequests = new Map();\n  }\n\n  static instance(): NetworkLog {\n    if (!networkLogInstance) {\n      networkLogInstance = new NetworkLog();\n    }\n    return networkLogInstance;\n  }\n\n  modelAdded(networkManager: SDK.NetworkManager.NetworkManager): void {\n    const eventListeners = [];\n    eventListeners.push(\n        networkManager.addEventListener(SDK.NetworkManager.Events.RequestStarted, this.onRequestStarted, this));\n    eventListeners.push(\n        networkManager.addEventListener(SDK.NetworkManager.Events.RequestUpdated, this.onRequestUpdated, this));\n    eventListeners.push(\n        networkManager.addEventListener(SDK.NetworkManager.Events.RequestRedirected, this.onRequestRedirect, this));\n    eventListeners.push(\n        networkManager.addEventListener(SDK.NetworkManager.Events.RequestFinished, this.onRequestUpdated, this));\n    eventListeners.push(networkManager.addEventListener(\n        SDK.NetworkManager.Events.MessageGenerated, this.networkMessageGenerated.bind(this, networkManager)));\n    eventListeners.push(\n        networkManager.addEventListener(SDK.NetworkManager.Events.ResponseReceived, this.onResponseReceived, this));\n\n    const resourceTreeModel = networkManager.target().model(SDK.ResourceTreeModel.ResourceTreeModel);\n    if (resourceTreeModel) {\n      eventListeners.push(\n          resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.WillReloadPage, this.willReloadPage, this));\n      eventListeners.push(resourceTreeModel.addEventListener(\n          SDK.ResourceTreeModel.Events.MainFrameNavigated, this.onMainFrameNavigated, this));\n      eventListeners.push(resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.Load, this.onLoad, this));\n      eventListeners.push(resourceTreeModel.addEventListener(\n          SDK.ResourceTreeModel.Events.DOMContentLoaded, this.onDOMContentLoaded.bind(this, resourceTreeModel)));\n    }\n\n    this.modelListeners.set(networkManager, eventListeners);\n  }\n\n  modelRemoved(networkManager: SDK.NetworkManager.NetworkManager): void {\n    this.removeNetworkManagerListeners(networkManager);\n  }\n\n  private removeNetworkManagerListeners(networkManager: SDK.NetworkManager.NetworkManager): void {\n    Common.EventTarget.removeEventListeners(this.modelListeners.get(networkManager) || []);\n  }\n\n  setIsRecording(enabled: boolean): void {\n    if (this.isRecording === enabled) {\n      return;\n    }\n    this.isRecording = enabled;\n    if (enabled) {\n      SDK.TargetManager.TargetManager.instance().observeModels(SDK.NetworkManager.NetworkManager, this);\n    } else {\n      SDK.TargetManager.TargetManager.instance().unobserveModels(SDK.NetworkManager.NetworkManager, this);\n      SDK.TargetManager.TargetManager.instance()\n          .models(SDK.NetworkManager.NetworkManager)\n          .forEach(this.removeNetworkManagerListeners.bind(this));\n    }\n  }\n\n  requestForURL(url: string): SDK.NetworkRequest.NetworkRequest|null {\n    return this.requestsInternal.find(request => request.url() === url) || null;\n  }\n\n  originalRequestForURL(url: string): Protocol.Network.Request|null {\n    return this.sentNetworkRequests.find(request => request.url === url) || null;\n  }\n\n  originalResponseForURL(url: string): Protocol.Network.Response|null {\n    return this.receivedNetworkResponses.find(response => response.url === url) || null;\n  }\n\n  requests(): SDK.NetworkRequest.NetworkRequest[] {\n    return this.requestsInternal;\n  }\n\n  requestByManagerAndId(networkManager: SDK.NetworkManager.NetworkManager, requestId: string):\n      SDK.NetworkRequest.NetworkRequest|null {\n    // We iterate backwards because the last item will likely be the one needed for console network request lookups.\n    for (let i = this.requestsInternal.length - 1; i >= 0; i--) {\n      const request = this.requestsInternal[i];\n      if (requestId === request.requestId() &&\n          networkManager === SDK.NetworkManager.NetworkManager.forRequest(request)) {\n        return request;\n      }\n    }\n    return null;\n  }\n\n  private requestByManagerAndURL(networkManager: SDK.NetworkManager.NetworkManager, url: string):\n      SDK.NetworkRequest.NetworkRequest|null {\n    for (const request of this.requestsInternal) {\n      if (url === request.url() && networkManager === SDK.NetworkManager.NetworkManager.forRequest(request)) {\n        return request;\n      }\n    }\n    return null;\n  }\n\n  private initializeInitiatorSymbolIfNeeded(request: SDK.NetworkRequest.NetworkRequest): InitiatorData {\n    let initiatorInfo = this.initiatorData.get(request);\n    if (initiatorInfo) {\n      return initiatorInfo;\n    }\n    initiatorInfo = {\n      info: null,\n      chain: null,\n      request: undefined,\n    };\n    this.initiatorData.set(request, initiatorInfo);\n    return initiatorInfo;\n  }\n\n  initiatorInfoForRequest(request: SDK.NetworkRequest.NetworkRequest): InitiatorInfo {\n    const initiatorInfo = this.initializeInitiatorSymbolIfNeeded(request);\n    if (initiatorInfo.info) {\n      return initiatorInfo.info;\n    }\n\n    let type = SDK.NetworkRequest.InitiatorType.Other;\n    let url = '';\n    let lineNumber: number = -Infinity;\n    let columnNumber: number = -Infinity;\n    let scriptId: Protocol.Runtime.ScriptId|null = null;\n    let initiatorStack: Protocol.Runtime.StackTrace|null = null;\n    let initiatorRequest: (SDK.NetworkRequest.NetworkRequest|null)|null = null;\n    const initiator = request.initiator();\n\n    const redirectSource = request.redirectSource();\n    if (redirectSource) {\n      type = SDK.NetworkRequest.InitiatorType.Redirect;\n      url = redirectSource.url();\n    } else if (initiator) {\n      if (initiator.type === Protocol.Network.InitiatorType.Parser) {\n        type = SDK.NetworkRequest.InitiatorType.Parser;\n        url = initiator.url ? initiator.url : url;\n        lineNumber = typeof initiator.lineNumber === 'number' ? initiator.lineNumber : lineNumber;\n        columnNumber = typeof initiator.columnNumber === 'number' ? initiator.columnNumber : columnNumber;\n      } else if (initiator.type === Protocol.Network.InitiatorType.Script) {\n        for (let stack: (Protocol.Runtime.StackTrace|undefined) = initiator.stack; stack;) {\n          const topFrame = stack.callFrames.length ? stack.callFrames[0] : null;\n          if (!topFrame) {\n            stack = stack.parent;\n            continue;\n          }\n          type = SDK.NetworkRequest.InitiatorType.Script;\n          url = topFrame.url || i18nString(UIStrings.anonymous);\n          lineNumber = topFrame.lineNumber;\n          columnNumber = topFrame.columnNumber;\n          scriptId = topFrame.scriptId;\n          break;\n        }\n        if (!initiator.stack && initiator.url) {\n          type = SDK.NetworkRequest.InitiatorType.Script;\n          url = initiator.url;\n          lineNumber = initiator.lineNumber || 0;\n        }\n        if (initiator.stack && initiator.stack.callFrames && initiator.stack.callFrames.length) {\n          initiatorStack = initiator.stack || null;\n        }\n      } else if (initiator.type === Protocol.Network.InitiatorType.Preload) {\n        type = SDK.NetworkRequest.InitiatorType.Preload;\n      } else if (initiator.type === Protocol.Network.InitiatorType.Preflight) {\n        type = SDK.NetworkRequest.InitiatorType.Preflight;\n        initiatorRequest = request.preflightInitiatorRequest();\n      } else if (initiator.type === Protocol.Network.InitiatorType.SignedExchange) {\n        type = SDK.NetworkRequest.InitiatorType.SignedExchange;\n        url = initiator.url || '';\n      }\n    }\n\n    initiatorInfo.info = {type, url, lineNumber, columnNumber, scriptId, stack: initiatorStack, initiatorRequest};\n    return initiatorInfo.info;\n  }\n\n  initiatorGraphForRequest(request: SDK.NetworkRequest.NetworkRequest): InitiatorGraph {\n    const initiated = new Map<SDK.NetworkRequest.NetworkRequest, SDK.NetworkRequest.NetworkRequest>();\n    const networkManager = SDK.NetworkManager.NetworkManager.forRequest(request);\n    for (const otherRequest of this.requestsInternal) {\n      const otherRequestManager = SDK.NetworkManager.NetworkManager.forRequest(otherRequest);\n      if (networkManager === otherRequestManager && this.initiatorChain(otherRequest).has(request)) {\n        // save parent request of otherRequst in order to build the initiator chain table later\n        const initiatorRequest = this.initiatorRequest(otherRequest);\n        if (initiatorRequest) {\n          initiated.set(otherRequest, initiatorRequest);\n        }\n      }\n    }\n    return {initiators: this.initiatorChain(request), initiated: initiated};\n  }\n\n  private initiatorChain(request: SDK.NetworkRequest.NetworkRequest): Set<SDK.NetworkRequest.NetworkRequest> {\n    const initiatorDataForRequest = this.initializeInitiatorSymbolIfNeeded(request);\n    let initiatorChainCache = initiatorDataForRequest.chain;\n    if (initiatorChainCache) {\n      return initiatorChainCache;\n    }\n\n    initiatorChainCache = new Set();\n\n    let checkRequest: SDK.NetworkRequest.NetworkRequest|null = request;\n    while (checkRequest) {\n      const initiatorData = this.initializeInitiatorSymbolIfNeeded(checkRequest);\n      if (initiatorData.chain) {\n        Platform.SetUtilities.addAll(initiatorChainCache, initiatorData.chain);\n        break;\n      }\n      if (initiatorChainCache.has(checkRequest)) {\n        break;\n      }\n      initiatorChainCache.add(checkRequest);\n      checkRequest = this.initiatorRequest(checkRequest);\n    }\n    initiatorDataForRequest.chain = initiatorChainCache;\n    return initiatorChainCache;\n  }\n\n  private initiatorRequest(request: SDK.NetworkRequest.NetworkRequest): SDK.NetworkRequest.NetworkRequest|null {\n    const initiatorData = this.initializeInitiatorSymbolIfNeeded(request);\n    if (initiatorData.request !== undefined) {\n      return initiatorData.request;\n    }\n    const url = this.initiatorInfoForRequest(request).url;\n    const networkManager = SDK.NetworkManager.NetworkManager.forRequest(request);\n    initiatorData.request = networkManager ? this.requestByManagerAndURL(networkManager, url) : null;\n    return initiatorData.request;\n  }\n\n  private willReloadPage(): void {\n    if (!Common.Settings.Settings.instance().moduleSetting('network_log.preserve-log').get()) {\n      this.reset(true);\n    }\n  }\n\n  private onMainFrameNavigated(event: Common.EventTarget.EventTargetEvent<SDK.ResourceTreeModel.ResourceTreeFrame>):\n      void {\n    const mainFrame = event.data;\n    const manager = mainFrame.resourceTreeModel().target().model(SDK.NetworkManager.NetworkManager);\n    if (!manager || mainFrame.resourceTreeModel().target().parentTarget()) {\n      return;\n    }\n\n    // If a page resulted in an error, the browser will navigate to an internal error page\n    // hosted at 'chrome-error://...'. In this case, skip the frame navigated event to preserve\n    // the network log.\n    if (mainFrame.url !== mainFrame.unreachableUrl() && mainFrame.url.startsWith('chrome-error://')) {\n      return;\n    }\n\n    const preserveLog = Common.Settings.Settings.instance().moduleSetting('network_log.preserve-log').get();\n\n    const oldRequests = this.requestsInternal;\n    const oldManagerRequests =\n        this.requestsInternal.filter(request => SDK.NetworkManager.NetworkManager.forRequest(request) === manager);\n    const oldRequestsSet = this.requestsSet;\n    this.requestsInternal = [];\n    this.sentNetworkRequests = [];\n    this.receivedNetworkResponses = [];\n    this.requestsSet = new Set();\n    this.requestsMap.clear();\n    this.unresolvedPreflightRequests.clear();\n    this.dispatchEventToListeners(Events.Reset, {clearIfPreserved: !preserveLog});\n\n    // Preserve requests from the new session.\n    let currentPageLoad: SDK.PageLoad.PageLoad|null = null;\n    const requestsToAdd = [];\n    for (const request of oldManagerRequests) {\n      if (request.loaderId !== mainFrame.loaderId) {\n        continue;\n      }\n      if (!currentPageLoad) {\n        currentPageLoad = new SDK.PageLoad.PageLoad(request);\n        let redirectSource = request.redirectSource();\n        while (redirectSource) {\n          requestsToAdd.push(redirectSource);\n          redirectSource = redirectSource.redirectSource();\n        }\n      }\n      requestsToAdd.push(request);\n    }\n\n    // Preserve service worker requests from the new session.\n    const serviceWorkerRequestsToAdd = [];\n    for (const swRequest of oldRequests) {\n      if (!swRequest.initiatedByServiceWorker()) {\n        continue;\n      }\n\n      // If there is a matching request that came before this one, keep it.\n      const keepRequest = requestsToAdd.some(\n          request => request.url() === swRequest.url() && request.issueTime() <= swRequest.issueTime());\n      if (keepRequest) {\n        serviceWorkerRequestsToAdd.push(swRequest);\n      }\n    }\n    requestsToAdd.push(...serviceWorkerRequestsToAdd);\n\n    for (const request of requestsToAdd) {\n      currentPageLoad?.bindRequest(request);\n      oldRequestsSet.delete(request);\n      this.addRequest(request);\n    }\n\n    if (preserveLog) {\n      for (const request of oldRequestsSet) {\n        this.addRequest(request);\n        request.preserved = true;\n      }\n    }\n\n    if (currentPageLoad) {\n      this.pageLoadForManager.set(manager, currentPageLoad);\n    }\n  }\n\n  private addRequest(request: SDK.NetworkRequest.NetworkRequest): void {\n    this.requestsInternal.push(request);\n    this.requestsSet.add(request);\n    const requestList = this.requestsMap.get(request.requestId());\n    if (!requestList) {\n      this.requestsMap.set(request.requestId(), [request]);\n    } else {\n      requestList.push(request);\n    }\n    this.tryResolvePreflightRequests(request);\n    this.dispatchEventToListeners(Events.RequestAdded, request);\n  }\n\n  private tryResolvePreflightRequests(request: SDK.NetworkRequest.NetworkRequest): void {\n    if (request.isPreflightRequest()) {\n      const initiator = request.initiator();\n      if (initiator && initiator.requestId) {\n        const [initiatorRequest] = this.requestsForId(initiator.requestId);\n        if (initiatorRequest) {\n          request.setPreflightInitiatorRequest(initiatorRequest);\n          initiatorRequest.setPreflightRequest(request);\n        } else {\n          this.unresolvedPreflightRequests.set(initiator.requestId, request);\n        }\n      }\n    } else {\n      const preflightRequest = this.unresolvedPreflightRequests.get(request.requestId());\n      if (preflightRequest) {\n        this.unresolvedPreflightRequests.delete(request.requestId());\n        request.setPreflightRequest(preflightRequest);\n        preflightRequest.setPreflightInitiatorRequest(request);\n        // Force recomputation of initiator info, if it already exists.\n        const data = this.initiatorData.get(preflightRequest);\n        if (data) {\n          data.info = null;\n        }\n        this.dispatchEventToListeners(Events.RequestUpdated, preflightRequest);\n      }\n    }\n  }\n\n  importRequests(requests: SDK.NetworkRequest.NetworkRequest[]): void {\n    this.reset(true);\n    this.requestsInternal = [];\n    this.sentNetworkRequests = [];\n    this.receivedNetworkResponses = [];\n    this.requestsSet.clear();\n    this.requestsMap.clear();\n    this.unresolvedPreflightRequests.clear();\n    for (const request of requests) {\n      this.addRequest(request);\n    }\n  }\n\n  private onRequestStarted(event: Common.EventTarget.EventTargetEvent<SDK.NetworkManager.RequestStartedEvent>): void {\n    const {request, originalRequest} = event.data;\n    if (originalRequest) {\n      this.sentNetworkRequests.push(originalRequest);\n    }\n    this.requestsSet.add(request);\n    const manager = SDK.NetworkManager.NetworkManager.forRequest(request);\n    const pageLoad = manager ? this.pageLoadForManager.get(manager) : null;\n    if (pageLoad) {\n      pageLoad.bindRequest(request);\n    }\n    this.addRequest(request);\n  }\n\n  private onResponseReceived(event: Common.EventTarget.EventTargetEvent<SDK.NetworkManager.ResponseReceivedEvent>):\n      void {\n    const response = event.data.response;\n    this.receivedNetworkResponses.push(response);\n  }\n\n  private onRequestUpdated(event: Common.EventTarget.EventTargetEvent<SDK.NetworkRequest.NetworkRequest>): void {\n    const request = event.data;\n    if (!this.requestsSet.has(request)) {\n      return;\n    }\n    this.dispatchEventToListeners(Events.RequestUpdated, request);\n  }\n\n  private onRequestRedirect(event: Common.EventTarget.EventTargetEvent<SDK.NetworkRequest.NetworkRequest>): void {\n    this.initiatorData.delete(event.data);\n  }\n\n  private onDOMContentLoaded(\n      resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel,\n      event: Common.EventTarget.EventTargetEvent<number>): void {\n    const networkManager = resourceTreeModel.target().model(SDK.NetworkManager.NetworkManager);\n    const pageLoad = networkManager ? this.pageLoadForManager.get(networkManager) : null;\n    if (pageLoad) {\n      pageLoad.contentLoadTime = event.data;\n    }\n  }\n\n  private onLoad(event: Common.EventTarget\n                     .EventTargetEvent<{resourceTreeModel: SDK.ResourceTreeModel.ResourceTreeModel, loadTime: number}>):\n      void {\n    const networkManager = event.data.resourceTreeModel.target().model(SDK.NetworkManager.NetworkManager);\n    const pageLoad = networkManager ? this.pageLoadForManager.get(networkManager) : null;\n    if (pageLoad) {\n      pageLoad.loadTime = event.data.loadTime;\n    }\n  }\n\n  reset(clearIfPreserved: boolean): void {\n    this.requestsInternal = [];\n    this.sentNetworkRequests = [];\n    this.receivedNetworkResponses = [];\n    this.requestsSet.clear();\n    this.requestsMap.clear();\n    this.unresolvedPreflightRequests.clear();\n    const managers = new Set<SDK.NetworkManager.NetworkManager>(\n        SDK.TargetManager.TargetManager.instance().models(SDK.NetworkManager.NetworkManager));\n    for (const manager of this.pageLoadForManager.keys()) {\n      if (!managers.has(manager)) {\n        this.pageLoadForManager.delete(manager);\n      }\n    }\n\n    this.dispatchEventToListeners(Events.Reset, {clearIfPreserved});\n  }\n\n  private networkMessageGenerated(\n      networkManager: SDK.NetworkManager.NetworkManager,\n      event: Common.EventTarget.EventTargetEvent<SDK.NetworkManager.MessageGeneratedEvent>): void {\n    const {message, warning, requestId} = event.data;\n    const consoleMessage = new SDK.ConsoleModel.ConsoleMessage(\n        networkManager.target().model(SDK.RuntimeModel.RuntimeModel), Protocol.Log.LogEntrySource.Network,\n        warning ? Protocol.Log.LogEntryLevel.Warning : Protocol.Log.LogEntryLevel.Info, message);\n    this.associateConsoleMessageWithRequest(consoleMessage, requestId);\n    SDK.ConsoleModel.ConsoleModel.instance().addMessage(consoleMessage);\n  }\n\n  associateConsoleMessageWithRequest(consoleMessage: SDK.ConsoleModel.ConsoleMessage, requestId: string): void {\n    const target = consoleMessage.target();\n    const networkManager = target ? target.model(SDK.NetworkManager.NetworkManager) : null;\n    if (!networkManager) {\n      return;\n    }\n    const request = this.requestByManagerAndId(networkManager, requestId);\n    if (!request) {\n      return;\n    }\n    consoleMessageToRequest.set(consoleMessage, request);\n    const initiator = request.initiator();\n    if (initiator) {\n      consoleMessage.stackTrace = initiator.stack || undefined;\n      if (initiator.url) {\n        consoleMessage.url = initiator.url;\n        consoleMessage.line = initiator.lineNumber || 0;\n      }\n    }\n  }\n\n  static requestForConsoleMessage(consoleMessage: SDK.ConsoleModel.ConsoleMessage): SDK.NetworkRequest.NetworkRequest\n      |null {\n    return consoleMessageToRequest.get(consoleMessage) || null;\n  }\n\n  requestsForId(requestId: string): SDK.NetworkRequest.NetworkRequest[] {\n    return this.requestsMap.get(requestId) || [];\n  }\n}\n\nconst consoleMessageToRequest = new WeakMap<SDK.ConsoleModel.ConsoleMessage, SDK.NetworkRequest.NetworkRequest>();\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Events {\n  Reset = 'Reset',\n  RequestAdded = 'RequestAdded',\n  RequestUpdated = 'RequestUpdated',\n}\n\nexport interface ResetEvent {\n  clearIfPreserved: boolean;\n}\n\nexport type EventTypes = {\n  [Events.Reset]: ResetEvent,\n  [Events.RequestAdded]: SDK.NetworkRequest.NetworkRequest,\n  [Events.RequestUpdated]: SDK.NetworkRequest.NetworkRequest,\n};\n\ninterface InitiatorData {\n  info: InitiatorInfo|null;\n  chain: Set<SDK.NetworkRequest.NetworkRequest>|null;\n  request?: SDK.NetworkRequest.NetworkRequest|null;\n}\n\nexport interface InitiatorGraph {\n  initiators: Set<SDK.NetworkRequest.NetworkRequest>;\n  initiated: Map<SDK.NetworkRequest.NetworkRequest, SDK.NetworkRequest.NetworkRequest>;\n}\n\ninterface InitiatorInfo {\n  type: SDK.NetworkRequest.InitiatorType;\n  url: string;\n  lineNumber: number;\n  columnNumber: number;\n  scriptId: Protocol.Runtime.ScriptId|null;\n  stack: Protocol.Runtime.StackTrace|null;\n  initiatorRequest: SDK.NetworkRequest.NetworkRequest|null;\n}\n"]}