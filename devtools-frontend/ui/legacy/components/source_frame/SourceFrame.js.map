{"version":3,"file":"SourceFrame.js","sourceRoot":"","sources":["../../../../../../../../front_end/ui/legacy/components/source_frame/SourceFrame.ts"],"names":[],"mappings":"AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA4BG;AAEH,OAAO,KAAK,MAAM,MAAM,mCAAmC,CAAC;AAC5D,OAAO,KAAK,IAAI,MAAM,+BAA+B,CAAC;AACtD,OAAO,KAAK,QAAQ,MAAM,uCAAuC,CAAC;AAClE,OAAO,KAAK,SAAS,MAAM,2CAA2C,CAAC;AACvE,OAAO,KAAK,SAAS,MAAM,6CAA6C,CAAC;AAEzE,OAAO,KAAK,EAAE,MAAM,iBAAiB,CAAC;AAGtC,OAAO,EAAC,MAAM,EAAE,iBAAiB,EAAC,MAAM,wBAAwB,CAAC;AAEjE,MAAM,SAAS,GAAG;IAChB;;MAEE;IACF,MAAM,EAAE,QAAQ;IAChB;;MAEE;IACF,WAAW,EAAE,cAAc;IAC3B;;MAEE;IACF,OAAO,EAAE,UAAU;IACnB;;;;MAIE;IACF,iBAAiB,EAAE,yBAAyB;IAC5C;;;;MAIE;IACF,kBAAkB,EAAE,6BAA6B;IACjD;;;;MAIE;IACF,YAAY,EAAE,0BAA0B;IACxC;;;MAGE;IACF,mBAAmB,EAAE,2BAA2B;IAChD;;;;MAIE;IACF,yBAAyB,EAAE,wCAAwC;CACpE,CAAC;AACF,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,kDAAkD,EAAE,SAAS,CAAC,CAAC;AACxG,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;AAEtE,MAAM,OAAO,eAAgB,SAAQ,EAAE,CAAC,IAAI,CAAC,UAAU;IAGpC,WAAW,CAA2D;IAC/E,cAAc,CAAU;IACxB,UAAU,CAAc;IACxB,uBAAuB,CAA2D;IAClF,YAAY,CAAwD;IAC3D,YAAY,CAA2B;IAChD,qBAAqB,CAAU;IACtB,mBAAmB,CAAyB;IACrD,kBAAkB,CAAoB;IACtC,qBAAqB,CAAc;IACnC,eAAe,CAAS;IACxB,YAAY,CAAsC;IAClD,wBAAwB,CAAoB;IAC5C,wBAAwB,CAAS;IACjC,aAAa,CAAkC;IAC/C,WAAW,CAAc;IACzB,SAAS,CAAU;IACnB,6BAA6B,CAAU;IAC9B,cAAc,CAAyB;IAChD,cAAc,CAAwC;IACtD,QAAQ,CAAU;IAClB,gBAAgB,CAIjB;IACC,cAAc,CAAc;IAC5B,cAAc,CAAqC;IACnD,cAAc,CAAU;IACxB,gBAAgB,CAAU;IAC1B,uBAAuB,CAAS;IAChC,uBAAuB,CAA8C;IAC7E,UAAU,CAAU;IACpB,YACI,WAAqE,EACrE,iBAAyC;QAC3C,KAAK,CAAC,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;QAEpC,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAE/B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACvB,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,YAAY,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,UAAU,CAAC,SAAS,CAAC,WAAW,CAAC,EAAE,wBAAwB,CAAC,CAAC;QAC9G,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAAC,EAAE,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,EAAE,GAAG,EAAE;YAC7E,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAEpC,IAAI,CAAC,mBAAmB,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;QAErF,IAAI,CAAC,kBAAkB,GAAG,IAAI,iBAAiB,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC;QACzE,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAE3C,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QAEzB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;QACxB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,6BAA6B,EAAE,IAAI,CAAC,CAAC;QACzG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,CAAC;QACnG,IAAI,CAAC,kBAAkB,CAAC,gBAAgB,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,KAAK,CAAC,EAAE;YACjF,IAAI,CAAC,IAAI,CAAC,6BAA6B,EAAE;gBACvC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC9D;QACH,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,6BAA6B,GAAG,KAAK,CAAC;QAE3C,IAAI,CAAC,cAAc,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;QAEnD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAE1C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,uBAAuB,GAAG,EAAE,CAAC;QAElC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACtC,CAAC;IAED,0BAA0B,CAAC,UAAkB,EAAE,YAAqB;QAIlE,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,YAAY,GAAG,IAAI,CAAC,uBAAuB,CAAC,0BAA0B,CAAC,UAAU,CAAC,CAAC;YACnF,UAAU,GAAG,CAAC,CAAC;SAChB;aAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YAC9B,CAAC,UAAU,EAAE,YAAY,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;SACjF;QACD,OAAO,EAAC,UAAU,EAAE,YAAY,EAAC,CAAC;IACpC,CAAC;IAED,0BAA0B,CAAC,UAAkB,EAAE,eAAiC,CAAC;QAI/E,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,UAAU,GAAG,IAAI,CAAC,uBAAuB,CAAC,0BAA0B,CAAC,YAAY,CAAC,CAAC;YACnF,YAAY,GAAG,CAAC,CAAC;SAClB;aAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YAC9B,CAAC,UAAU,EAAE,YAAY,CAAC,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,EAAE,YAAY,CAAC,CAAC;SACjF;QACD,OAAO,EAAC,UAAU,EAAE,YAAY,EAAC,CAAC;IACpC,CAAC;IAED,iBAAiB,CAAC,cAAuB,EAAE,eAAyB;QAClE,IAAI,CAAC,qBAAqB,GAAG,cAAc,IAAI,OAAO,CAAC,eAAe,CAAC,CAAC;QACxE,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,cAAc,CAAC,CAAC;IAC/C,CAAC;IAEO,KAAK,CAAC,SAAS,CAAC,KAAc;QACpC,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAEpC,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;QAC9B,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC;QACnC,IAAI,YAAY,CAAC;QACjB,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,MAAM,UAAU,GAAG,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;YACxD,IAAI,CAAC,YAAY,GAAG,UAAU,CAAC,gBAAgB,CAAC;YAChD,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAC;YACnD,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;YACjE,MAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,SAAS,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC;YACnF,MAAM,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;YAC7E,YAAY,GAAG,IAAI,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACtF;aAAM;YACL,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;YACvC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;YAC3D,MAAM,KAAK,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,SAAS,EAAE,SAAS,CAAC,WAAW,CAAC,CAAC;YACnF,MAAM,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;YAC7E,YAAY,GAAG,IAAI,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SACtF;QACD,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,EAAE,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;YAC5F,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;SAC5C;QACD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,sBAAsB,EAAE,CAAC;IAChC,CAAC;IAEO,yBAAyB;QAC/B,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,MAAM,WAAW,GAAG,IAAI,CAAC,uBAAuB,CAAC;YACjD,MAAM,kBAAkB,GAAG,WAAW,CAAC,0BAA0B,CAAC,WAAW,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;YAC/F,MAAM,oBAAoB,GAAG,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;YACxE,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,UAAU,CAAC,EAAE;gBAC1D,MAAM,cAAc,GAAG,WAAW,CAAC,0BAA0B,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC;gBAC9E,OAAO,KAAK,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,oBAAoB,EAAE,GAAG,CAAC,EAAE,CAAC;YAChF,CAAC,CAAC,CAAC;SACJ;aAAM,IAAI,IAAI,CAAC,cAAc,EAAE;YAC9B,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,UAAU,CAAC,EAAE;gBAC1D,MAAM,IAAI,GAAG,IAAI,CAAC,mBAAmB,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;gBAChE,IAAI,UAAU,KAAK,CAAC,EAAE;oBACpB,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;iBACrB;gBACD,IAAI,IAAI,KAAK,IAAI,CAAC,mBAAmB,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;oBAC/D,OAAO,MAAM,CAAC,IAAI,CAAC,CAAC;iBACrB;gBACD,OAAO,GAAG,CAAC;YACb,CAAC,CAAC,CAAC;SACJ;aAAM;YACL,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,UAAU,CAAC,EAAE;gBAC1D,OAAO,MAAM,CAAC,UAAU,CAAC,CAAC;YAC5B,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEO,sBAAsB;QAC5B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QACxF,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAEO,mBAAmB,CAAC,IAAY,EAAE,SAA2B,CAAC;QACpE,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;SACvB;QACD,OAAO,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAC7D,CAAC;IAEO,mBAAmB,CAAC,IAAY,EAAE,MAAc;QACtD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;SACvB;QACD,OAAO,IAAI,CAAC,YAAY,CAAC,mBAAmB,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IAC7D,CAAC;IAED,WAAW,CAAC,QAAiB;QAC3B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACzB,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC;SAChD;IACH,CAAC;IAED,YAAY;QACV,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,mBAAmB,EAAE,CAAC;QAC3B,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC1B,CAAC;IAED,QAAQ;QACN,KAAK,CAAC,QAAQ,EAAE,CAAC;QAEjB,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;IAC5E,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAED,IAAI,UAAU;QACZ,OAAO,IAAI,CAAC,kBAAkB,CAAC;IACjC,CAAC;IAED,IAAI,MAAM;QACR,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAEO,KAAK,CAAC,mBAAmB;QAC/B,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAC1B,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;YAE7B,MAAM,iBAAiB,GAAG,IAAI,EAAE,CAAC,iBAAiB,CAAC,iBAAiB,EAAE,CAAC;YACvE,iBAAiB,CAAC,QAAQ,CAAC,UAAU,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;YAC1D,iBAAiB,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC;YACpC,IAAI,CAAC,mBAAmB,CAAC,OAAO,CAAC,WAAW,CAAC,iBAAiB,CAAC,OAAO,CAAC,CAAC;YAExE,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;YACjD,IAAI,KAAK,EAAE,OAAO,CAAC;YACnB,IAAI,eAAe,CAAC,OAAO,KAAK,IAAI,EAAE;gBACpC,KAAK,GAAG,eAAe,CAAC,KAAK,CAAC;gBAC9B,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC,KAAK,CAAC;aACzC;iBAAM;gBACL,OAAO,GAAG,eAAe,CAAC,OAAO,CAAC;gBAClC,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,OAAO,CAAC;aAC9G;YAED,iBAAiB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;YAE/B,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,uBAAuB,KAAK,kBAAkB,EAAE;gBACjE,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,aAAa,CAAC,OAAO,CAC9C,IAAI,GAAG,CAAC,2EAA2E,EAAE,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;gBAC3G,MAAM,OAAO,GAAG,IAAI,OAAO,CAOxB,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;oBACrB,MAAM,CAAC,SAAS;wBACZ,yDAAyD;wBACzD,oEAAoE;wBACpE,8DAA8D;wBAC9D,CAAC,EAAC,IAAI,EAAoB,EAAQ,EAAE;4BAClC,IAAI,OAAO,IAAI,IAAI,EAAE;gCACnB,QAAQ,IAAI,CAAC,KAAK,EAAE;oCAClB,KAAK,UAAU;wCACb,iBAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;wCACpD,MAAM;iCACT;6BACF;iCAAM,IAAI,QAAQ,IAAI,IAAI,EAAE;gCAC3B,QAAQ,IAAI,CAAC,MAAM,EAAE;oCACnB,KAAK,aAAa;wCAChB,IAAI,OAAO,IAAI,IAAI,EAAE;4CACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;yCACpB;6CAAM,IAAI,QAAQ,IAAI,IAAI,EAAE;4CAC3B,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;yCACtB;wCACD,MAAM;iCACT;6BACF;wBACH,CAAC,CAAC;oBACN,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC;gBAC1B,CAAC,CAAC,CAAC;gBACH,MAAM,CAAC,WAAW,CAAC,EAAC,MAAM,EAAE,aAAa,EAAE,MAAM,EAAE,EAAC,OAAO,EAAC,EAAC,CAAC,CAAC;gBAC/D,IAAI;oBACF,MAAM,EAAC,MAAM,EAAE,OAAO,EAAE,mBAAmB,EAAC,GAAG,MAAM,OAAO,CAAC;oBAC7D,IAAI,CAAC,UAAU,GAAG,OAAO,GAAG,MAAM,CAAC;oBACnC,IAAI,CAAC,uBAAuB,GAAG,IAAI,MAAM,CAAC,eAAe,CAAC,eAAe,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAAC;iBACzG;gBAAC,OAAO,CAAC,EAAE;oBACV,IAAI,CAAC,UAAU,GAAG,OAAO,GAAG,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;iBAC/C;wBAAS;oBACR,MAAM,CAAC,SAAS,EAAE,CAAC;iBACpB;aACF;YAED,iBAAiB,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACjC,iBAAiB,CAAC,IAAI,EAAE,CAAC;YAEzB,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;YACpC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;YACzB,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAEnC,IAAI,KAAK,EAAE;gBACT,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;gBAC7B,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;gBAEpC,sFAAsF;gBACtF,mFAAmF;gBACnF,iFAAiF;gBACjF,qFAAqF;gBACrF,+EAA+E;gBAC/E,kFAAkF;gBAClF,mDAAmD;gBACnD,uDAAuD;gBACvD,gBAAgB;gBAChB,UAAU,CAAC,GAAG,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC;aAC7D;iBAAM;gBACL,IAAI,IAAI,CAAC,qBAAqB,IAAI,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;oBACzE,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;iBAC5B;qBAAM;oBACL,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;iBACxC;aACF;YACD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;SACxB;IACH,CAAC;IAEO,uBAAuB;QAC7B,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,OAAO,IAAI,CAAC,uBAAuB,CAAC;SACrC;QACD,IAAI,CAAC,uBAAuB;YACxB,SAAS,CAAC,eAAe,CAAC,mBAAmB,CAAC,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC,UAAU,IAAI,EAAE,CAAC,CAAC;QACvG,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACtC,CAAC;IAED,cAAc,CAAC,IAAY,EAAE,MAAe,EAAE,eAAyB;QACrE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,gBAAgB,GAAG,EAAC,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,eAAe,EAAE,eAAe,EAAC,CAAC;QACvF,IAAI,CAAC,2BAA2B,EAAE,CAAC;IACrC,CAAC;IAEO,2BAA2B;QACjC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YAC1B,OAAO;SACR;QAED,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;YACrC,OAAO;SACR;QAED,MAAM,EAAC,UAAU,EAAE,YAAY,EAAC,GAC5B,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC;QAE9F,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,UAAU,EAAE,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,CAAC;QACxG,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAEO,qBAAqB;QAC3B,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,EAAE,CAAC;QACjD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;IAC/B,CAAC;IAED,YAAY,CAAC,IAAY;QACvB,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAEO,yBAAyB;QAC/B,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,EAAE;YAChC,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;gBACnC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;gBAC1D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;aAC5B;SACF;IACH,CAAC;IAED,SAAS;QACP,OAAO,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;IACrC,CAAC;IAED,YAAY,CAAC,SAAwC;QACnD,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC;QAChC,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAEO,yBAAyB;QAC/B,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE;YAC1D,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC;YAChE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC5B;IACH,CAAC;IAEO,gBAAgB;QACtB,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACnC,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACnC,CAAC;IAED,aAAa,CAAC,SAAwC,EAAE,SAAwC;QAC9F,MAAM,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC;QAC9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,qBAAqB,KAAK,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;QACjH,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS,EAAE;YACrC,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC/B;QACD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;QAE7C,IAAI,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,cAAc,EAAE;YAC5C,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;SACrD;IACH,CAAC;IAED,OAAO;QACL,OAAO,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC;YAChD,CAAC,IAAI,CAAC,qBAAqB,KAAK,IAAI,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;IACnG,CAAC;IAED,gBAAgB;QACd,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;QAC3D,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;QACzC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;YAC5B,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC/B;QACD,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IACrC,CAAC;IAEO,gBAAgB,CAAC,OAAe,EAAE,QAAgB;QACxD,IAAI,CAAC,QAAQ,EAAE;YACb,OAAO,EAAE,CAAC;SACX;QACD,oHAAoH;QACpH,iHAAiH;QACjH,8CAA8C;QAC9C,IAAI,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;YACvC,OAAO,qBAAqB,CAAC;SAC9B;QACD,IAAI,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC;YACvE,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;YACvC,OAAO,UAAU,CAAC;SACnB;QACD,kHAAkH;QAClH,IAAI,QAAQ,KAAK,YAAY,IAAI,OAAO,CAAC,KAAK,CAAC,aAAa,CAAC,EAAE;YAC7D,OAAO,yBAAyB,CAAC;SAClC;QACD,IAAI,QAAQ,KAAK,kBAAkB,EAAE;YACnC,kGAAkG;YAClG,0FAA0F;YAC1F,OAAO,kBAAkB,CAAC;SAC3B;QACD,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,kBAAkB,CAAC,eAAuB;QACxC,IAAI,CAAC,uBAAuB,GAAG,eAAe,CAAC;QAC/C,IAAI,CAAC,qBAAqB,CAAC,EAAE,CAAC,CAAC;IACjC,CAAC;IAED,eAAe;QACb,OAAO,IAAI,CAAC,uBAAuB,CAAC;IACtC,CAAC;IAEO,qBAAqB,CAAC,OAAe;QAC3C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,uBAAuB,CAAC,CAAC,CAAC;IACpG,CAAC;IAED,UAAU,CAAC,OAAoB,EAAE,SAAsB;QACrD,IAAI,CAAC,6BAA6B,GAAG,IAAI,CAAC;QAC1C,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACxB,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,SAAS,EAAE;gBACd,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;gBAC/C,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;gBAC3D,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACpD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aACxB;iBAAM;gBACL,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC;gBACjD,IAAI,CAAC,uBAAuB,GAAG,YAAY,CAAC;gBAC5C,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAC1C,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;aACvB;SACF;aAAM;YACL,MAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;YACtD,MAAM,SAAS,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;YACtD,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;YAC/C,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;YAChD,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;SACjD;QAED,iEAAiE;QACjE,iEAAiE;QACjE,IAAI,IAAI,CAAC,uBAAuB,EAAE;YAChC,KAAK,MAAM,UAAU,IAAI,IAAI,CAAC,uBAAuB,CAAC,uBAAuB,EAAE,EAAE;gBAC/E,IAAI,CAAC,kBAAkB,CAAC,eAAe,CAAC,UAAU,EAAE,uBAAuB,EAAE,IAAI,CAAC,CAAC;aACpF;SACF;QAED,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACjC,IAAI,CAAC,qBAAqB,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;QAC1C,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAExB,IAAI,IAAI,CAAC,wBAAwB,EAAE;YACjC,IAAI,CAAC,wBAAwB,EAAE,CAAC;YAChC,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;SACtC;QACD,IAAI,CAAC,6BAA6B,GAAG,KAAK,CAAC;IAC7C,CAAC;IAED,iBAAiB,CAAC,IAA2C;QAC3D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC7B,CAAC;IAEO,mBAAmB,CACvB,YAA4C,EAAE,UAAmB,EAAE,aAAsB;QAC3F,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QAExB,MAAM,KAAK,GAAG,YAAY,CAAC,aAAa,EAAE,CAAC;QAC3C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QACzB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAErD,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,wBAAwB,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;SACzE;QAED,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;YAC9B,IAAI,CAAC,kBAAkB,CAAC,4BAA4B,EAAE,CAAC;SACxD;aAAM,IAAI,UAAU,IAAI,aAAa,EAAE;YACtC,IAAI,CAAC,0BAA0B,EAAE,CAAC;SACnC;aAAM,IAAI,UAAU,EAAE;YACrB,IAAI,CAAC,sBAAsB,EAAE,CAAC;SAC/B;aAAM;YACL,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;SAC7D;IACH,CAAC;IAED,aAAa,CAAC,YAA4C,EAAE,UAAmB,EAAE,aAAuB;QACtG,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC;SACjD;QAED,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,mBAAmB,CAAC,YAAY,EAAE,UAAU,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;SAC5E;aAAM;YACL,IAAI,CAAC,wBAAwB;gBACzB,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,EAAE,UAAU,EAAE,OAAO,CAAC,aAAa,CAAC,CAAC,CAAC;SAC3F;QAED,IAAI,CAAC,mBAAmB,EAAE,CAAC;IAC7B,CAAC;IAEO,6BAA6B;QACnC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;YAC9B,OAAO;SACR;QACD,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,CAAC;QACnC,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;SAC5E;QACD,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAE,IAAI,CAAC,WAAsB,EAAE,IAAI,CAAC,CAAC;IACrF,CAAC;IAEO,WAAW;QACjB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;QACzB,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,IAAI,CAAC,wBAAwB,GAAG,CAAC,CAAC,CAAC;QACnC,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;IAC1B,CAAC;IAED,cAAc;QACZ,MAAM,KAAK,GAAG,IAAI,CAAC,wBAAwB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAC9G,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YAChB,OAAO;SACR;QACD,IAAI,CAAC,kBAAkB,CAAC,4BAA4B,EAAE,CAAC;QACvD,IAAI,KAAK,EAAE;YACT,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;SAC1B;IACH,CAAC;IAED,sBAAsB;QACpB,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IACzD,CAAC;IAEO,oCAAoC;QAC1C,OAAO,QAAQ,CAAC,cAAc,CAAC,UAAU,CACrC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC,aAAa,EAAE,EACvE,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;IAChD,CAAC;IAED,sBAAsB;QACpB,MAAM,YAAY,GAAG,IAAI,CAAC,oCAAoC,EAAE,CAAC;QACjE,MAAM,SAAS,GAAG,IAAI,CAAC,wBAAwB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC;QACzF,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,CAAC;IACrC,CAAC;IAED,0BAA0B;QACxB,MAAM,YAAY,GAAG,IAAI,CAAC,oCAAoC,EAAE,CAAC;QACjE,IAAI,CAAC,kBAAkB,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;IAC5C,CAAC;IAED,2BAA2B;QACzB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,mBAAmB;QACjB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,kBAAkB,CAAC,KAAa;QAC9B,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,EAAE;YAC9C,OAAO;SACR;QACD,IAAI,CAAC,wBAAwB,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC;QAChG,IAAI,IAAI,CAAC,cAAc,EAAE;YACvB,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;SAC5E;QACD,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CACzC,IAAI,CAAC,WAAsB,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC;IACvF,CAAC;IAED,oBAAoB,CAAC,YAA4C,EAAE,WAAmB;QACpF,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QAChE,IAAI,CAAC,KAAK,EAAE;YACV,OAAO;SACR;QACD,IAAI,CAAC,kBAAkB,CAAC,sBAAsB,CAAE,IAAI,CAAC,WAAsB,EAAE,IAAI,CAAC,CAAC;QAEnF,MAAM,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACpD,MAAM,KAAK,GAAG,YAAY,CAAC,aAAa,EAAE,CAAC;QAC3C,IAAI,IAAI,CAAC;QACT,IAAI,KAAK,CAAC,iBAAiB,EAAE;YAC3B,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;SAC5C;aAAM;YACL,IAAI,GAAG,OAAO,CAAC,OAAO,CAAC,KAAK,EAAE;gBAC5B,OAAO,WAAW,CAAC;YACrB,CAAC,CAAC,CAAC;SACJ;QAED,MAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAChE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,EAAE,CAAC,CAAC;IACjE,CAAC;IAED,cAAc,CAAC,YAA4C,EAAE,WAAmB;QAC9E,IAAI,CAAC,6BAA6B,EAAE,CAAC;QAErC,IAAI,IAAI,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,EAAE,CAAC;QAC1C,MAAM,KAAK,GAAG,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,CAAC;QAElD,MAAM,KAAK,GAAG,YAAY,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,KAAK,CAAC,iBAAiB,EAAE;YAC3B,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,WAAW,CAAC,CAAC;SACzC;aAAM;YACL,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE;gBACzB,OAAO,WAAW,CAAC;YACrB,CAAC,CAAC,CAAC;SACJ;QAED,MAAM,MAAM,GAAG,IAAI,CAAC,mBAAmB,CAAC,KAAK,CAAC,CAAC;QAC/C,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YAClB,OAAO;SACR;QAED,oEAAoE;QACpE,MAAM,iBAAiB,GAAG,QAAQ,CAAC,cAAc,CAAC,UAAU,CACxD,MAAM,EAAE,IAAI,CAAC,kBAAkB,CAAC,SAAS,EAAE,EAAE,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;QAC3F,MAAM,cAAc,GAAG,QAAQ,CAAC,eAAe,CAAC,GAAG,CAAC,iBAAiB,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC,CAAC;QAC1F,MAAM,SAAS,GAAG,MAAM,CAAC,cAAc,CAAC,CAAC;QACzC,MAAM,sBAAsB,GAAG,QAAQ,CAAC,eAAe,CAAC,qBAAqB,CAAC,WAAW,CAAC,CAAC;QAC3F,MAAM,oBAAoB,GAAG,sBAAsB,CAAC,MAAM,CAAC;QAC3D,MAAM,cAAc,GAAG,SAAS,CAAC,SAAS,GAAG,sBAAsB,CAAC,MAAM,GAAG,CAAC,CAAC;QAC/E,IAAI,gBAAgB,GAAW,SAAS,CAAC,WAAW,CAAC;QACrD,IAAI,sBAAsB,CAAC,MAAM,GAAG,CAAC,EAAE;YACrC,gBAAgB;gBACZ,sBAAsB,CAAC,oBAAoB,GAAG,CAAC,CAAC,GAAG,sBAAsB,CAAC,oBAAoB,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC;SAC7G;QAED,IAAI,CAAC,kBAAkB,CAAC,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC/C,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAC;QACzE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAChC,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,kBAAkB,CAAC,cAAc,EAAE,gBAAgB,CAAC,CAAC,CAAC;IAC1F,CAAC;IAEO,mBAAmB,CAAC,WAAmB;QAC7C,MAAM,MAAM,GAAG,EAAE,CAAC;QAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,EAAE,CAAC,EAAE;YAC3D,IAAI,IAAI,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YAC3C,IAAI,MAAM,GAAG,CAAC,CAAC;YACf,IAAI,KAAK,CAAC;YACV,GAAG;gBACD,KAAK,GAAG,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;gBAC/B,IAAI,KAAK,EAAE;oBACT,MAAM,aAAa,GAAG,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBACjE,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE;wBACnB,MAAM,CAAC,IAAI,CAAC,IAAI,SAAS,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC,EAAE,MAAM,GAAG,aAAa,CAAC,CAAC,CAAC;qBACpG;oBACD,MAAM,IAAI,aAAa,CAAC;oBACxB,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC;iBACtC;aACF,QAAQ,KAAK,IAAI,IAAI,EAAE;SACzB;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,6BAA6B,CAAC,YAAwC,EAAE,iBAAyB;QAC/F,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,2BAA2B,CACvB,YAAwC,EAAE,iBAAyB,EAAE,mBAA2B;QAClG,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,aAAa;QACX,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAEO,oBAAoB;QAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,CAAC;QACxD,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YACtB,OAAO;SACR;QACD,IAAI,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YACzB,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,iBAAiB,EAAE,EAAC,GAAG,EAAE,UAAU,CAAC,MAAM,EAAC,CAAC,CAAC,CAAC;YAC/F,OAAO;SACR;QACD,IAAI,SAAS,GAAkC,UAAU,CAAC,CAAC,CAAC,CAAC;QAC7D,IAAI,SAAS,CAAC,OAAO,EAAE,EAAE;YACvB,MAAM,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,SAAS,CAAC,CAAC;YAClF,IAAI,IAAI,CAAC,uBAAuB,EAAE;gBAChC,MAAM,WAAW,GAAG,IAAI,CAAC,uBAAuB,CAAC;gBACjD,MAAM,kBAAkB,GAAG,WAAW,CAAC,0BAA0B,CAAC,WAAW,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;gBAC/F,MAAM,oBAAoB,GAAG,kBAAkB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC;gBACpE,MAAM,cAAc,GAAG,WAAW,CAAC,0BAA0B,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;gBAE3E,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAClC,SAAS,CAAC,kBAAkB,EAAE,EAAC,GAAG,EAAE,cAAc,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,oBAAoB,EAAE,GAAG,CAAC,EAAC,CAAC,CAAC,CAAC;aAC5G;iBAAM;gBACL,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,EAAE;oBACzB,IAAI,CAAC,kBAAkB,CAAC,cAAc,CAAC,SAAS,CAAC,OAAO,EAAE,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;iBACtF;gBACD,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,YAAY,EAAE,EAAC,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAC,CAAC,CAAC,CAAC;aAC/G;YACD,OAAO;SACR;QACD,SAAS,GAAG,SAAS,CAAC,SAAS,EAAE,CAAC;QAElC,MAAM,YAAY,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QAC7D,IAAI,SAAS,CAAC,SAAS,KAAK,SAAS,CAAC,OAAO,EAAE;YAC7C,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,mBAAmB,EAAE,EAAC,GAAG,EAAE,YAAY,CAAC,MAAM,EAAC,CAAC,CAAC,CAAC;SACpG;aAAM;YACL,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,UAAU,CAClC,SAAS,CAAC,yBAAyB,EACnC,EAAC,GAAG,EAAE,SAAS,CAAC,OAAO,GAAG,SAAS,CAAC,SAAS,GAAG,CAAC,EAAE,GAAG,EAAE,YAAY,CAAC,MAAM,EAAC,CAAC,CAAC,CAAC;SACpF;IACH,CAAC;CACF;AAkBD,MAAM,wBAAwB,GAAgC,EAAE,CAAC;AAEjE,MAAM,UAAU,qBAAqB,CAAC,YAAuC;IAC3E,wBAAwB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;AAC9C,CAAC;AAED,MAAM,UAAU,2BAA2B;IACzC,OAAO,wBAAwB,CAAC;AAClC,CAAC;AAED,wDAAwD;AACxD,+CAA+C;AAC/C,MAAM,CAAN,IAAY,aAIX;AAJD,WAAY,aAAa;IACvB,4CAA2B,CAAA;IAC3B,kCAAiB,CAAA;IACjB,sCAAqB,CAAA;AACvB,CAAC,EAJW,aAAa,KAAb,aAAa,QAIxB","sourcesContent":["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as Formatter from '../../../../models/formatter/formatter.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport type * as Workspace from '../../../../models/workspace/workspace.js';\nimport * as UI from '../../legacy.js';\n\nimport type {SourcesTextEditorDelegate} from './SourcesTextEditor.js';\nimport {Events, SourcesTextEditor} from './SourcesTextEditor.js';\n\nconst UIStrings = {\n  /**\n  *@description Text for the source of something\n  */\n  source: 'Source',\n  /**\n  *@description Text to pretty print a file\n  */\n  prettyPrint: 'Pretty print',\n  /**\n  *@description Text when something is loading\n  */\n  loading: 'Loadingâ€¦',\n  /**\n  * @description Shown at the bottom of the Sources panel when the user has made multiple\n  * simultaneous text selections in the text editor.\n  * @example {2} PH1\n  */\n  dSelectionRegions: '{PH1} selection regions',\n  /**\n  * @description Position indicator in Source Frame of the Sources panel. The placeholder is a\n  * hexadecimal number value, which is why it is prefixed with '0x'.\n  * @example {abc} PH1\n  */\n  bytecodePositionXs: 'Bytecode position `0x`{PH1}',\n  /**\n  *@description Text in Source Frame of the Sources panel\n  *@example {2} PH1\n  *@example {2} PH2\n  */\n  lineSColumnS: 'Line {PH1}, Column {PH2}',\n  /**\n  *@description Text in Source Frame of the Sources panel\n  *@example {2} PH1\n  */\n  dCharactersSelected: '{PH1} characters selected',\n  /**\n  *@description Text in Source Frame of the Sources panel\n  *@example {2} PH1\n  *@example {2} PH2\n  */\n  dLinesDCharactersSelected: '{PH1} lines, {PH2} characters selected',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/source_frame/SourceFrame.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class SourceFrameImpl extends UI.View.SimpleView implements UI.SearchableView.Searchable,\n                                                                   UI.SearchableView.Replaceable,\n                                                                   SourcesTextEditorDelegate, Transformer {\n  private readonly lazyContent: () => Promise<TextUtils.ContentProvider.DeferredContent>;\n  private prettyInternal: boolean;\n  private rawContent: string|null;\n  private formattedContentPromise: Promise<Formatter.ScriptFormatter.FormattedContent>|null;\n  private formattedMap: Formatter.ScriptFormatter.FormatterSourceMapping|null;\n  private readonly prettyToggle: UI.Toolbar.ToolbarToggle;\n  private shouldAutoPrettyPrint: boolean;\n  private readonly progressToolbarItem: UI.Toolbar.ToolbarItem;\n  private textEditorInternal: SourcesTextEditor;\n  private prettyCleanGeneration: number|null;\n  private cleanGeneration: number;\n  private searchConfig: UI.SearchableView.SearchConfig|null;\n  private delayedFindSearchMatches: (() => void)|null;\n  private currentSearchResultIndex: number;\n  private searchResults: TextUtils.TextRange.TextRange[];\n  private searchRegex: RegExp|null;\n  private loadError: boolean;\n  private muteChangeEventsForSetContent: boolean;\n  private readonly sourcePosition: UI.Toolbar.ToolbarText;\n  private searchableView: UI.SearchableView.SearchableView|null;\n  private editable: boolean;\n  private positionToReveal: {\n    line: number,\n    column: (number|undefined),\n    shouldHighlight: (boolean|undefined),\n  }|null;\n  private lineToScrollTo: number|null;\n  private selectionToSet: TextUtils.TextRange.TextRange|null;\n  private loadedInternal: boolean;\n  private contentRequested: boolean;\n  private highlighterTypeInternal: string;\n  private wasmDisassemblyInternal: Common.WasmDisassembly.WasmDisassembly|null;\n  contentSet: boolean;\n  constructor(\n      lazyContent: () => Promise<TextUtils.ContentProvider.DeferredContent>,\n      codeMirrorOptions?: UI.TextEditor.Options) {\n    super(i18nString(UIStrings.source));\n\n    this.lazyContent = lazyContent;\n\n    this.prettyInternal = false;\n    this.rawContent = null;\n    this.formattedContentPromise = null;\n    this.formattedMap = null;\n    this.prettyToggle = new UI.Toolbar.ToolbarToggle(i18nString(UIStrings.prettyPrint), 'largeicon-pretty-print');\n    this.prettyToggle.addEventListener(UI.Toolbar.ToolbarButton.Events.Click, () => {\n      this.setPretty(!this.prettyToggle.toggled());\n    });\n    this.shouldAutoPrettyPrint = false;\n    this.prettyToggle.setVisible(false);\n\n    this.progressToolbarItem = new UI.Toolbar.ToolbarItem(document.createElement('div'));\n\n    this.textEditorInternal = new SourcesTextEditor(this, codeMirrorOptions);\n    this.textEditorInternal.show(this.element);\n\n    this.prettyCleanGeneration = null;\n    this.cleanGeneration = 0;\n\n    this.searchConfig = null;\n    this.delayedFindSearchMatches = null;\n    this.currentSearchResultIndex = -1;\n    this.searchResults = [];\n    this.searchRegex = null;\n    this.loadError = false;\n\n    this.textEditorInternal.addEventListener(Events.EditorFocused, this.resetCurrentSearchResultIndex, this);\n    this.textEditorInternal.addEventListener(Events.SelectionChanged, this.updateSourcePosition, this);\n    this.textEditorInternal.addEventListener(UI.TextEditor.Events.TextChanged, event => {\n      if (!this.muteChangeEventsForSetContent) {\n        this.onTextChanged(event.data.oldRange, event.data.newRange);\n      }\n    });\n    this.muteChangeEventsForSetContent = false;\n\n    this.sourcePosition = new UI.Toolbar.ToolbarText();\n\n    this.searchableView = null;\n    this.editable = false;\n    this.textEditorInternal.setReadOnly(true);\n\n    this.positionToReveal = null;\n    this.lineToScrollTo = null;\n    this.selectionToSet = null;\n    this.loadedInternal = false;\n    this.contentRequested = false;\n    this.highlighterTypeInternal = '';\n\n    this.wasmDisassemblyInternal = null;\n    this.contentSet = false;\n  }\n\n  get wasmDisassembly(): Common.WasmDisassembly.WasmDisassembly|null {\n    return this.wasmDisassemblyInternal;\n  }\n\n  editorLocationToUILocation(lineNumber: number, columnNumber?: number): {\n    lineNumber: number,\n    columnNumber?: number|undefined,\n  } {\n    if (this.wasmDisassemblyInternal) {\n      columnNumber = this.wasmDisassemblyInternal.lineNumberToBytecodeOffset(lineNumber);\n      lineNumber = 0;\n    } else if (this.prettyInternal) {\n      [lineNumber, columnNumber] = this.prettyToRawLocation(lineNumber, columnNumber);\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  uiLocationToEditorLocation(lineNumber: number, columnNumber: number|undefined = 0): {\n    lineNumber: number,\n    columnNumber: number,\n  } {\n    if (this.wasmDisassemblyInternal) {\n      lineNumber = this.wasmDisassemblyInternal.bytecodeOffsetToLineNumber(columnNumber);\n      columnNumber = 0;\n    } else if (this.prettyInternal) {\n      [lineNumber, columnNumber] = this.rawToPrettyLocation(lineNumber, columnNumber);\n    }\n    return {lineNumber, columnNumber};\n  }\n\n  setCanPrettyPrint(canPrettyPrint: boolean, autoPrettyPrint?: boolean): void {\n    this.shouldAutoPrettyPrint = canPrettyPrint && Boolean(autoPrettyPrint);\n    this.prettyToggle.setVisible(canPrettyPrint);\n  }\n\n  private async setPretty(value: boolean): Promise<void> {\n    this.prettyInternal = value;\n    this.prettyToggle.setEnabled(false);\n\n    const wasLoaded = this.loaded;\n    const selection = this.selection();\n    let newSelection;\n    if (this.prettyInternal) {\n      const formatInfo = await this.requestFormattedContent();\n      this.formattedMap = formatInfo.formattedMapping;\n      this.setContent(formatInfo.formattedContent, null);\n      this.prettyCleanGeneration = this.textEditorInternal.markClean();\n      const start = this.rawToPrettyLocation(selection.startLine, selection.startColumn);\n      const end = this.rawToPrettyLocation(selection.endLine, selection.endColumn);\n      newSelection = new TextUtils.TextRange.TextRange(start[0], start[1], end[0], end[1]);\n    } else {\n      this.setContent(this.rawContent, null);\n      this.cleanGeneration = this.textEditorInternal.markClean();\n      const start = this.prettyToRawLocation(selection.startLine, selection.startColumn);\n      const end = this.prettyToRawLocation(selection.endLine, selection.endColumn);\n      newSelection = new TextUtils.TextRange.TextRange(start[0], start[1], end[0], end[1]);\n    }\n    if (wasLoaded) {\n      this.textEditor.revealPosition(newSelection.endLine, newSelection.endColumn, this.editable);\n      this.textEditor.setSelection(newSelection);\n    }\n    this.prettyToggle.setEnabled(true);\n    this.updatePrettyPrintState();\n  }\n\n  private updateLineNumberFormatter(): void {\n    if (this.wasmDisassemblyInternal) {\n      const disassembly = this.wasmDisassemblyInternal;\n      const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n      const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length + 1;\n      this.textEditorInternal.setLineNumberFormatter(lineNumber => {\n        const bytecodeOffset = disassembly.lineNumberToBytecodeOffset(lineNumber - 1);\n        return `0x${bytecodeOffset.toString(16).padStart(bytecodeOffsetDigits, '0')}`;\n      });\n    } else if (this.prettyInternal) {\n      this.textEditorInternal.setLineNumberFormatter(lineNumber => {\n        const line = this.prettyToRawLocation(lineNumber - 1, 0)[0] + 1;\n        if (lineNumber === 1) {\n          return String(line);\n        }\n        if (line !== this.prettyToRawLocation(lineNumber - 2, 0)[0] + 1) {\n          return String(line);\n        }\n        return '-';\n      });\n    } else {\n      this.textEditorInternal.setLineNumberFormatter(lineNumber => {\n        return String(lineNumber);\n      });\n    }\n  }\n\n  private updatePrettyPrintState(): void {\n    this.prettyToggle.setToggled(this.prettyInternal);\n    this.textEditorInternal.element.classList.toggle('pretty-printed', this.prettyInternal);\n    this.updateLineNumberFormatter();\n  }\n\n  private prettyToRawLocation(line: number, column: number|undefined = 0): number[] {\n    if (!this.formattedMap) {\n      return [line, column];\n    }\n    return this.formattedMap.formattedToOriginal(line, column);\n  }\n\n  private rawToPrettyLocation(line: number, column: number): number[] {\n    if (!this.formattedMap) {\n      return [line, column];\n    }\n    return this.formattedMap.originalToFormatted(line, column);\n  }\n\n  setEditable(editable: boolean): void {\n    this.editable = editable;\n    if (this.loadedInternal) {\n      this.textEditorInternal.setReadOnly(!editable);\n    }\n  }\n\n  hasLoadError(): boolean {\n    return this.loadError;\n  }\n\n  wasShown(): void {\n    this.ensureContentLoaded();\n    this.wasShownOrLoaded();\n  }\n\n  willHide(): void {\n    super.willHide();\n\n    this.clearPositionToReveal();\n  }\n\n  async toolbarItems(): Promise<UI.Toolbar.ToolbarItem[]> {\n    return [this.prettyToggle, this.sourcePosition, this.progressToolbarItem];\n  }\n\n  get loaded(): boolean {\n    return this.loadedInternal;\n  }\n\n  get textEditor(): SourcesTextEditor {\n    return this.textEditorInternal;\n  }\n\n  get pretty(): boolean {\n    return this.prettyInternal;\n  }\n\n  private async ensureContentLoaded(): Promise<void> {\n    if (!this.contentRequested) {\n      this.contentRequested = true;\n\n      const progressIndicator = new UI.ProgressIndicator.ProgressIndicator();\n      progressIndicator.setTitle(i18nString(UIStrings.loading));\n      progressIndicator.setTotalWork(100);\n      this.progressToolbarItem.element.appendChild(progressIndicator.element);\n\n      const deferredContent = await this.lazyContent();\n      let error, content;\n      if (deferredContent.content === null) {\n        error = deferredContent.error;\n        this.rawContent = deferredContent.error;\n      } else {\n        content = deferredContent.content;\n        this.rawContent = deferredContent.isEncoded ? window.atob(deferredContent.content) : deferredContent.content;\n      }\n\n      progressIndicator.setWorked(1);\n\n      if (!error && this.highlighterTypeInternal === 'application/wasm') {\n        const worker = Common.Worker.WorkerWrapper.fromURL(\n            new URL('../../../../entrypoints/wasmparser_worker/wasmparser_worker-entrypoint.js', import.meta.url));\n        const promise = new Promise<{\n          source: string,\n          offsets: number[],\n          functionBodyOffsets: {\n            start: number,\n            end: number,\n          }[],\n        }>((resolve, reject) => {\n          worker.onmessage =\n              /** @type {{event:string, params:{percentage:number}}} */\n              // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n              // eslint-disable-next-line @typescript-eslint/no-explicit-any\n              ({data}: MessageEvent<any>): void => {\n                if ('event' in data) {\n                  switch (data.event) {\n                    case 'progress':\n                      progressIndicator.setWorked(data.params.percentage);\n                      break;\n                  }\n                } else if ('method' in data) {\n                  switch (data.method) {\n                    case 'disassemble':\n                      if ('error' in data) {\n                        reject(data.error);\n                      } else if ('result' in data) {\n                        resolve(data.result);\n                      }\n                      break;\n                  }\n                }\n              };\n          worker.onerror = reject;\n        });\n        worker.postMessage({method: 'disassemble', params: {content}});\n        try {\n          const {source, offsets, functionBodyOffsets} = await promise;\n          this.rawContent = content = source;\n          this.wasmDisassemblyInternal = new Common.WasmDisassembly.WasmDisassembly(offsets, functionBodyOffsets);\n        } catch (e) {\n          this.rawContent = content = error = e.message;\n        } finally {\n          worker.terminate();\n        }\n      }\n\n      progressIndicator.setWorked(100);\n      progressIndicator.done();\n\n      this.formattedContentPromise = null;\n      this.formattedMap = null;\n      this.prettyToggle.setEnabled(true);\n\n      if (error) {\n        this.setContent(null, error);\n        this.prettyToggle.setEnabled(false);\n\n        // Occasionally on load, there can be a race in which it appears the CodeMirror plugin\n        // runs the highlighter type assignment out of order. In case of an error then, set\n        // the highlighter type after a short delay. This appears to only occur the first\n        // time that CodeMirror is initialized, likely because the highlighter type was first\n        // initialized based on the file type, and the syntax highlighting is in a race\n        // with the new highlighter assignment. As the option is just an option and is not\n        // observable, we can't handle waiting for it here.\n        // https://github.com/codemirror/CodeMirror/issues/6019\n        // CRBug 1011445\n        setTimeout(() => this.setHighlighterType('text/plain'), 50);\n      } else {\n        if (this.shouldAutoPrettyPrint && TextUtils.TextUtils.isMinified(content)) {\n          await this.setPretty(true);\n        } else {\n          this.setContent(this.rawContent, null);\n        }\n      }\n      this.contentSet = true;\n    }\n  }\n\n  private requestFormattedContent(): Promise<Formatter.ScriptFormatter.FormattedContent> {\n    if (this.formattedContentPromise) {\n      return this.formattedContentPromise;\n    }\n    this.formattedContentPromise =\n        Formatter.ScriptFormatter.formatScriptContent(this.highlighterTypeInternal, this.rawContent || '');\n    return this.formattedContentPromise;\n  }\n\n  revealPosition(line: number, column?: number, shouldHighlight?: boolean): void {\n    this.lineToScrollTo = null;\n    this.selectionToSet = null;\n    this.positionToReveal = {line: line, column: column, shouldHighlight: shouldHighlight};\n    this.innerRevealPositionIfNeeded();\n  }\n\n  private innerRevealPositionIfNeeded(): void {\n    if (!this.positionToReveal) {\n      return;\n    }\n\n    if (!this.loaded || !this.isShowing()) {\n      return;\n    }\n\n    const {lineNumber, columnNumber} =\n        this.uiLocationToEditorLocation(this.positionToReveal.line, this.positionToReveal.column);\n\n    this.textEditorInternal.revealPosition(lineNumber, columnNumber, this.positionToReveal.shouldHighlight);\n    this.positionToReveal = null;\n  }\n\n  private clearPositionToReveal(): void {\n    this.textEditorInternal.clearPositionHighlight();\n    this.positionToReveal = null;\n  }\n\n  scrollToLine(line: number): void {\n    this.clearPositionToReveal();\n    this.lineToScrollTo = line;\n    this.innerScrollToLineIfNeeded();\n  }\n\n  private innerScrollToLineIfNeeded(): void {\n    if (this.lineToScrollTo !== null) {\n      if (this.loaded && this.isShowing()) {\n        this.textEditorInternal.scrollToLine(this.lineToScrollTo);\n        this.lineToScrollTo = null;\n      }\n    }\n  }\n\n  selection(): TextUtils.TextRange.TextRange {\n    return this.textEditor.selection();\n  }\n\n  setSelection(textRange: TextUtils.TextRange.TextRange): void {\n    this.selectionToSet = textRange;\n    this.innerSetSelectionIfNeeded();\n  }\n\n  private innerSetSelectionIfNeeded(): void {\n    if (this.selectionToSet && this.loaded && this.isShowing()) {\n      this.textEditorInternal.setSelection(this.selectionToSet, true);\n      this.selectionToSet = null;\n    }\n  }\n\n  private wasShownOrLoaded(): void {\n    this.innerRevealPositionIfNeeded();\n    this.innerSetSelectionIfNeeded();\n    this.innerScrollToLineIfNeeded();\n  }\n\n  onTextChanged(_oldRange: TextUtils.TextRange.TextRange, _newRange: TextUtils.TextRange.TextRange): void {\n    const wasPretty = this.pretty;\n    this.prettyInternal = this.prettyCleanGeneration !== null && this.textEditor.isClean(this.prettyCleanGeneration);\n    if (this.prettyInternal !== wasPretty) {\n      this.updatePrettyPrintState();\n    }\n    this.prettyToggle.setEnabled(this.isClean());\n\n    if (this.searchConfig && this.searchableView) {\n      this.performSearch(this.searchConfig, false, false);\n    }\n  }\n\n  isClean(): boolean {\n    return this.textEditor.isClean(this.cleanGeneration) ||\n        (this.prettyCleanGeneration !== null && this.textEditor.isClean(this.prettyCleanGeneration));\n  }\n\n  contentCommitted(): void {\n    this.cleanGeneration = this.textEditorInternal.markClean();\n    this.prettyCleanGeneration = null;\n    this.rawContent = this.textEditor.text();\n    this.formattedMap = null;\n    this.formattedContentPromise = null;\n    if (this.prettyInternal) {\n      this.prettyInternal = false;\n      this.updatePrettyPrintState();\n    }\n    this.prettyToggle.setEnabled(true);\n  }\n\n  private simplifyMimeType(content: string, mimeType: string): string {\n    if (!mimeType) {\n      return '';\n    }\n    // There are plenty of instances where TSX/JSX files are served with out the trailing x, i.e. JSX with a 'js' suffix\n    // which breaks the formatting. Therefore, if the mime type is TypeScript or JavaScript, we switch to the TSX/JSX\n    // superset so that we don't break formatting.\n    if (mimeType.indexOf('typescript') >= 0) {\n      return 'text/typescript-jsx';\n    }\n    if (mimeType.indexOf('javascript') >= 0 || mimeType.indexOf('jscript') >= 0 ||\n        mimeType.indexOf('ecmascript') >= 0) {\n      return 'text/jsx';\n    }\n    // A hack around the fact that files with \"php\" extension might be either standalone or html embedded php scripts.\n    if (mimeType === 'text/x-php' && content.match(/\\<\\?.*\\?\\>/g)) {\n      return 'application/x-httpd-php';\n    }\n    if (mimeType === 'application/wasm') {\n      // text/webassembly is not a proper MIME type, but CodeMirror uses it for WAT syntax highlighting.\n      // We generally use application/wasm, which is the correct MIME type for Wasm binary data.\n      return 'text/webassembly';\n    }\n    return mimeType;\n  }\n\n  setHighlighterType(highlighterType: string): void {\n    this.highlighterTypeInternal = highlighterType;\n    this.updateHighlighterType('');\n  }\n\n  highlighterType(): string {\n    return this.highlighterTypeInternal;\n  }\n\n  private updateHighlighterType(content: string): void {\n    this.textEditorInternal.setMimeType(this.simplifyMimeType(content, this.highlighterTypeInternal));\n  }\n\n  setContent(content: string|null, loadError: string|null): void {\n    this.muteChangeEventsForSetContent = true;\n    if (!this.loadedInternal) {\n      this.loadedInternal = true;\n      if (!loadError) {\n        this.textEditorInternal.setText(content || '');\n        this.cleanGeneration = this.textEditorInternal.markClean();\n        this.textEditorInternal.setReadOnly(!this.editable);\n        this.loadError = false;\n      } else {\n        this.textEditorInternal.setText(loadError || '');\n        this.highlighterTypeInternal = 'text/plain';\n        this.textEditorInternal.setReadOnly(true);\n        this.loadError = true;\n      }\n    } else {\n      const scrollTop = this.textEditorInternal.scrollTop();\n      const selection = this.textEditorInternal.selection();\n      this.textEditorInternal.setText(content || '');\n      this.textEditorInternal.setScrollTop(scrollTop);\n      this.textEditorInternal.setSelection(selection);\n    }\n\n    // Mark non-breakable lines in the Wasm disassembly after setting\n    // up the content for the text editor (which creates the gutter).\n    if (this.wasmDisassemblyInternal) {\n      for (const lineNumber of this.wasmDisassemblyInternal.nonBreakableLineNumbers()) {\n        this.textEditorInternal.toggleLineClass(lineNumber, 'cm-non-breakable-line', true);\n      }\n    }\n\n    this.updateLineNumberFormatter();\n    this.updateHighlighterType(content || '');\n    this.wasShownOrLoaded();\n\n    if (this.delayedFindSearchMatches) {\n      this.delayedFindSearchMatches();\n      this.delayedFindSearchMatches = null;\n    }\n    this.muteChangeEventsForSetContent = false;\n  }\n\n  setSearchableView(view: UI.SearchableView.SearchableView|null): void {\n    this.searchableView = view;\n  }\n\n  private doFindSearchMatches(\n      searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards: boolean): void {\n    this.currentSearchResultIndex = -1;\n    this.searchResults = [];\n\n    const regex = searchConfig.toSearchRegex();\n    this.searchRegex = regex;\n    this.searchResults = this.collectRegexMatches(regex);\n\n    if (this.searchableView) {\n      this.searchableView.updateSearchMatchesCount(this.searchResults.length);\n    }\n\n    if (!this.searchResults.length) {\n      this.textEditorInternal.cancelSearchResultsHighlight();\n    } else if (shouldJump && jumpBackwards) {\n      this.jumpToPreviousSearchResult();\n    } else if (shouldJump) {\n      this.jumpToNextSearchResult();\n    } else {\n      this.textEditorInternal.highlightSearchResults(regex, null);\n    }\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, shouldJump: boolean, jumpBackwards?: boolean): void {\n    if (this.searchableView) {\n      this.searchableView.updateSearchMatchesCount(0);\n    }\n\n    this.resetSearch();\n    this.searchConfig = searchConfig;\n    if (this.loaded) {\n      this.doFindSearchMatches(searchConfig, shouldJump, Boolean(jumpBackwards));\n    } else {\n      this.delayedFindSearchMatches =\n          this.doFindSearchMatches.bind(this, searchConfig, shouldJump, Boolean(jumpBackwards));\n    }\n\n    this.ensureContentLoaded();\n  }\n\n  private resetCurrentSearchResultIndex(): void {\n    if (!this.searchResults.length) {\n      return;\n    }\n    this.currentSearchResultIndex = -1;\n    if (this.searchableView) {\n      this.searchableView.updateCurrentMatchIndex(this.currentSearchResultIndex);\n    }\n    this.textEditorInternal.highlightSearchResults((this.searchRegex as RegExp), null);\n  }\n\n  private resetSearch(): void {\n    this.searchConfig = null;\n    this.delayedFindSearchMatches = null;\n    this.currentSearchResultIndex = -1;\n    this.searchResults = [];\n    this.searchRegex = null;\n  }\n\n  searchCanceled(): void {\n    const range = this.currentSearchResultIndex !== -1 ? this.searchResults[this.currentSearchResultIndex] : null;\n    this.resetSearch();\n    if (!this.loaded) {\n      return;\n    }\n    this.textEditorInternal.cancelSearchResultsHighlight();\n    if (range) {\n      this.setSelection(range);\n    }\n  }\n\n  jumpToLastSearchResult(): void {\n    this.jumpToSearchResult(this.searchResults.length - 1);\n  }\n\n  private searchResultIndexForCurrentSelection(): number {\n    return Platform.ArrayUtilities.lowerBound(\n        this.searchResults, this.textEditorInternal.selection().collapseToEnd(),\n        TextUtils.TextRange.TextRange.comparator);\n  }\n\n  jumpToNextSearchResult(): void {\n    const currentIndex = this.searchResultIndexForCurrentSelection();\n    const nextIndex = this.currentSearchResultIndex === -1 ? currentIndex : currentIndex + 1;\n    this.jumpToSearchResult(nextIndex);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    const currentIndex = this.searchResultIndexForCurrentSelection();\n    this.jumpToSearchResult(currentIndex - 1);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return true;\n  }\n\n  supportsRegexSearch(): boolean {\n    return true;\n  }\n\n  jumpToSearchResult(index: number): void {\n    if (!this.loaded || !this.searchResults.length) {\n      return;\n    }\n    this.currentSearchResultIndex = (index + this.searchResults.length) % this.searchResults.length;\n    if (this.searchableView) {\n      this.searchableView.updateCurrentMatchIndex(this.currentSearchResultIndex);\n    }\n    this.textEditorInternal.highlightSearchResults(\n        (this.searchRegex as RegExp), this.searchResults[this.currentSearchResultIndex]);\n  }\n\n  replaceSelectionWith(searchConfig: UI.SearchableView.SearchConfig, replacement: string): void {\n    const range = this.searchResults[this.currentSearchResultIndex];\n    if (!range) {\n      return;\n    }\n    this.textEditorInternal.highlightSearchResults((this.searchRegex as RegExp), null);\n\n    const oldText = this.textEditorInternal.text(range);\n    const regex = searchConfig.toSearchRegex();\n    let text;\n    if (regex.__fromRegExpQuery) {\n      text = oldText.replace(regex, replacement);\n    } else {\n      text = oldText.replace(regex, function() {\n        return replacement;\n      });\n    }\n\n    const newRange = this.textEditorInternal.editRange(range, text);\n    this.textEditorInternal.setSelection(newRange.collapseToEnd());\n  }\n\n  replaceAllWith(searchConfig: UI.SearchableView.SearchConfig, replacement: string): void {\n    this.resetCurrentSearchResultIndex();\n\n    let text = this.textEditorInternal.text();\n    const range = this.textEditorInternal.fullRange();\n\n    const regex = searchConfig.toSearchRegex(true);\n    if (regex.__fromRegExpQuery) {\n      text = text.replace(regex, replacement);\n    } else {\n      text = text.replace(regex, function() {\n        return replacement;\n      });\n    }\n\n    const ranges = this.collectRegexMatches(regex);\n    if (!ranges.length) {\n      return;\n    }\n\n    // Calculate the position of the end of the last range to be edited.\n    const currentRangeIndex = Platform.ArrayUtilities.lowerBound(\n        ranges, this.textEditorInternal.selection(), TextUtils.TextRange.TextRange.comparator);\n    const lastRangeIndex = Platform.NumberUtilities.mod(currentRangeIndex - 1, ranges.length);\n    const lastRange = ranges[lastRangeIndex];\n    const replacementLineEndings = Platform.StringUtilities.findLineEndingIndexes(replacement);\n    const replacementLineCount = replacementLineEndings.length;\n    const lastLineNumber = lastRange.startLine + replacementLineEndings.length - 1;\n    let lastColumnNumber: number = lastRange.startColumn;\n    if (replacementLineEndings.length > 1) {\n      lastColumnNumber =\n          replacementLineEndings[replacementLineCount - 1] - replacementLineEndings[replacementLineCount - 2] - 1;\n    }\n\n    this.textEditorInternal.editRange(range, text);\n    this.textEditorInternal.revealPosition(lastLineNumber, lastColumnNumber);\n    this.textEditorInternal.setSelection(\n        TextUtils.TextRange.TextRange.createFromLocation(lastLineNumber, lastColumnNumber));\n  }\n\n  private collectRegexMatches(regexObject: RegExp): TextUtils.TextRange.TextRange[] {\n    const ranges = [];\n    for (let i = 0; i < this.textEditorInternal.linesCount; ++i) {\n      let line = this.textEditorInternal.line(i);\n      let offset = 0;\n      let match;\n      do {\n        match = regexObject.exec(line);\n        if (match) {\n          const matchEndIndex = match.index + Math.max(match[0].length, 1);\n          if (match[0].length) {\n            ranges.push(new TextUtils.TextRange.TextRange(i, offset + match.index, i, offset + matchEndIndex));\n          }\n          offset += matchEndIndex;\n          line = line.substring(matchEndIndex);\n        }\n      } while (match && line);\n    }\n    return ranges;\n  }\n\n  populateLineGutterContextMenu(_contextMenu: UI.ContextMenu.ContextMenu, _editorLineNumber: number): Promise<void> {\n    return Promise.resolve();\n  }\n\n  populateTextAreaContextMenu(\n      _contextMenu: UI.ContextMenu.ContextMenu, _editorLineNumber: number, _editorColumnNumber: number): Promise<void> {\n    return Promise.resolve();\n  }\n\n  canEditSource(): boolean {\n    return this.editable;\n  }\n\n  private updateSourcePosition(): void {\n    const selections = this.textEditorInternal.selections();\n    if (!selections.length) {\n      return;\n    }\n    if (selections.length > 1) {\n      this.sourcePosition.setText(i18nString(UIStrings.dSelectionRegions, {PH1: selections.length}));\n      return;\n    }\n    let textRange: TextUtils.TextRange.TextRange = selections[0];\n    if (textRange.isEmpty()) {\n      const location = this.prettyToRawLocation(textRange.endLine, textRange.endColumn);\n      if (this.wasmDisassemblyInternal) {\n        const disassembly = this.wasmDisassemblyInternal;\n        const lastBytecodeOffset = disassembly.lineNumberToBytecodeOffset(disassembly.lineNumbers - 1);\n        const bytecodeOffsetDigits = lastBytecodeOffset.toString(16).length;\n        const bytecodeOffset = disassembly.lineNumberToBytecodeOffset(location[0]);\n\n        this.sourcePosition.setText(i18nString(\n            UIStrings.bytecodePositionXs, {PH1: bytecodeOffset.toString(16).padStart(bytecodeOffsetDigits, '0')}));\n      } else {\n        if (!this.canEditSource()) {\n          this.textEditorInternal.revealPosition(textRange.endLine, textRange.endColumn, true);\n        }\n        this.sourcePosition.setText(i18nString(UIStrings.lineSColumnS, {PH1: location[0] + 1, PH2: location[1] + 1}));\n      }\n      return;\n    }\n    textRange = textRange.normalize();\n\n    const selectedText = this.textEditorInternal.text(textRange);\n    if (textRange.startLine === textRange.endLine) {\n      this.sourcePosition.setText(i18nString(UIStrings.dCharactersSelected, {PH1: selectedText.length}));\n    } else {\n      this.sourcePosition.setText(i18nString(\n          UIStrings.dLinesDCharactersSelected,\n          {PH1: textRange.endLine - textRange.startLine + 1, PH2: selectedText.length}));\n    }\n  }\n}\n\nexport interface LineDecorator {\n  decorate(uiSourceCode: Workspace.UISourceCode.UISourceCode, textEditor: SourcesTextEditor, type: string): void;\n}\n\nexport interface Transformer {\n  editorLocationToUILocation(lineNumber: number, columnNumber?: number): {\n    lineNumber: number,\n    columnNumber?: number|undefined,\n  };\n\n  uiLocationToEditorLocation(lineNumber: number, columnNumber?: number): {\n    lineNumber: number,\n    columnNumber: number,\n  };\n}\n\nconst registeredLineDecorators: LineDecoratorRegistration[] = [];\n\nexport function registerLineDecorator(registration: LineDecoratorRegistration): void {\n  registeredLineDecorators.push(registration);\n}\n\nexport function getRegisteredLineDecorators(): LineDecoratorRegistration[] {\n  return registeredLineDecorators;\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum DecoratorType {\n  PERFORMANCE = 'performance',\n  MEMORY = 'memory',\n  COVERAGE = 'coverage',\n}\n\nexport interface LineDecoratorRegistration {\n  lineDecorator: () => LineDecorator;\n  decoratorType: DecoratorType;\n}\n"]}