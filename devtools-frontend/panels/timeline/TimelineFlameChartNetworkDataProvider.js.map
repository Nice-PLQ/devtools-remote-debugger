{"version":3,"file":"TimelineFlameChartNetworkDataProvider.js","sourceRoot":"","sources":["../../../../../../front_end/panels/timeline/TimelineFlameChartNetworkDataProvider.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\n\nimport timelineFlamechartPopoverStyles from './timelineFlamechartPopover.css.js';\n\nimport type * as TimelineModel from '../../models/timeline_model/timeline_model.js';\nimport * as PerfUI from '../../ui/legacy/components/perf_ui/perf_ui.js';\nimport type * as TraceEngine from '../../models/trace/trace.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as ThemeSupport from '../../ui/legacy/theme_support/theme_support.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {type PerformanceModel} from './PerformanceModel.js';\nimport {FlameChartStyle, Selection} from './TimelineFlameChartView.js';\n\nimport {TimelineSelection} from './TimelineSelection.js';\nimport {TimelineUIUtils} from './TimelineUIUtils.js';\n\nconst UIStrings = {\n  /**\n   *@description Title of the Network tool\n   */\n  network: 'Network',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/timeline/TimelineFlameChartNetworkDataProvider.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class TimelineFlameChartNetworkDataProvider implements PerfUI.FlameChart.FlameChartDataProvider {\n  readonly #font: string;\n  readonly #style: {\n    padding: number,\n    height: number,\n    collapsible: boolean,\n    color: string,\n    font: string,\n    backgroundColor: string,\n    nestingLevel: number,\n    useFirstLineForOverview: boolean,\n    useDecoratorsForOverview: boolean,\n    shareHeaderLine: boolean,\n  };\n  #group: PerfUI.FlameChart.Group;\n  #minimumBoundaryInternal: number;\n  #maximumBoundary: number;\n  #timeSpan: number;\n  #requests: TimelineModel.TimelineModel.NetworkRequest[];\n  #maxLevel: number;\n  #legacyTimelineModel?: TimelineModel.TimelineModel.TimelineModelImpl|null;\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  #timelineDataInternal?: any;\n  #startTime?: number;\n  #endTime?: number;\n  #lastSelection?: Selection;\n  #priorityToValue?: Map<string, number>;\n  // Ignored during the migration to new trace data engine.\n  /* eslint-disable-next-line no-unused-private-class-members */\n  #traceEngineData: TraceEngine.Handlers.Migration.PartialTraceData|null;\n  constructor() {\n    this.#font = `${PerfUI.Font.DEFAULT_FONT_SIZE} ${PerfUI.Font.getFontFamilyForCanvas()}`;\n    this.#style = {\n      padding: 4,\n      height: 17,\n      collapsible: true,\n      color: ThemeSupport.ThemeSupport.instance().getComputedValue('--color-text-primary'),\n      font: this.#font,\n      backgroundColor: ThemeSupport.ThemeSupport.instance().getComputedValue('--color-background'),\n      nestingLevel: 0,\n      useFirstLineForOverview: false,\n      useDecoratorsForOverview: true,\n      shareHeaderLine: false,\n    };\n    this.#group =\n        ({startLevel: 0, name: i18nString(UIStrings.network), expanded: false, style: this.#style} as\n         PerfUI.FlameChart.Group);\n    this.#minimumBoundaryInternal = 0;\n    this.#maximumBoundary = 0;\n    this.#timeSpan = 0;\n    this.#requests = [];\n    this.#maxLevel = 0;\n\n    this.#legacyTimelineModel = null;\n    this.#traceEngineData = null;\n\n    // In the event of a theme change, these colors must be recalculated.\n    ThemeSupport.ThemeSupport.instance().addEventListener(ThemeSupport.ThemeChangeEvent.eventName, () => {\n      this.#style.color = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-text-primary');\n      this.#style.backgroundColor = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-background');\n    });\n  }\n\n  setModel(\n      performanceModel: PerformanceModel|null,\n      traceEngineData: TraceEngine.Handlers.Migration.PartialTraceData|null): void {\n    this.#timelineDataInternal = null;\n\n    this.#legacyTimelineModel = performanceModel && performanceModel.timelineModel();\n    this.#traceEngineData = traceEngineData;\n  }\n\n  isEmpty(): boolean {\n    this.timelineData();\n    return !this.#requests.length;\n  }\n\n  maxStackDepth(): number {\n    return this.#maxLevel;\n  }\n\n  timelineData(): PerfUI.FlameChart.FlameChartTimelineData {\n    if (this.#timelineDataInternal) {\n      return this.#timelineDataInternal;\n    }\n    this.#requests = [];\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.createEmpty();\n    if (this.#legacyTimelineModel) {\n      this.#appendTimelineData();\n    }\n    return this.#timelineDataInternal;\n  }\n\n  minimumBoundary(): number {\n    return this.#minimumBoundaryInternal;\n  }\n\n  totalTime(): number {\n    return this.#timeSpan;\n  }\n\n  setWindowTimes(startTime: number, endTime: number): void {\n    this.#startTime = startTime;\n    this.#endTime = endTime;\n    this.#updateTimelineData();\n  }\n\n  createSelection(index: number): TimelineSelection|null {\n    if (index === -1) {\n      return null;\n    }\n    const request = this.#requests[index];\n    this.#lastSelection = new Selection(TimelineSelection.fromNetworkRequest(request), index);\n    return this.#lastSelection.timelineSelection;\n  }\n\n  entryIndexForSelection(selection: TimelineSelection|null): number {\n    if (!selection) {\n      return -1;\n    }\n\n    if (this.#lastSelection && this.#lastSelection.timelineSelection.object === selection.object) {\n      return this.#lastSelection.entryIndex;\n    }\n\n    if (!TimelineSelection.isNetworkRequestSelection(selection.object)) {\n      return -1;\n    }\n    const index = this.#requests.indexOf(selection.object);\n    if (index !== -1) {\n      this.#lastSelection = new Selection(TimelineSelection.fromNetworkRequest(selection.object), index);\n    }\n    return index;\n  }\n\n  entryColor(index: number): string {\n    const request = (this.#requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    const category = TimelineUIUtils.networkRequestCategory(request);\n    return TimelineUIUtils.networkCategoryColor(category);\n  }\n\n  textColor(_index: number): string {\n    return FlameChartStyle.textColor;\n  }\n\n  entryTitle(index: number): string|null {\n    const request = (this.#requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    const parsedURL = new Common.ParsedURL.ParsedURL(request.url || '');\n    return parsedURL.isValid ? `${parsedURL.displayName} (${parsedURL.host})` : request.url || null;\n  }\n\n  entryFont(_index: number): string|null {\n    return this.#font;\n  }\n\n  /**\n   * Returns the pixels needed to decorate the event.\n   * The pixels compare to the start of the earliest event of the request.\n   *\n   * Request.beginTime(), which is used in FlameChart to calculate the unclippedBarX\n   * v\n   *    |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *    ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * @param request\n   * @param unclippedBarX The start pixel of the request. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns the pixels to draw waiting time and left and right whiskers and url text\n   */\n  getDecorationPixels(\n      request: TimelineModel.TimelineModel.NetworkRequest, unclippedBarX: number,\n      timeToPixelRatio: number): {sendStart: number, headersEnd: number, finish: number, start: number, end: number} {\n    const beginTime = request.beginTime();\n    const timeToPixel = (time: number): number => Math.floor(unclippedBarX + (time - beginTime) * timeToPixelRatio);\n    const minBarWidthPx = 2;\n    const startTime = request.getStartTime();\n    const endTime = request.endTime;\n    const {sendStartTime, headersEndTime} = request.getSendReceiveTiming();\n    const sendStart = Math.max(timeToPixel(sendStartTime), unclippedBarX);\n    const headersEnd = Math.max(timeToPixel(headersEndTime), sendStart);\n    const finish = Math.max(timeToPixel(request.finishTime || endTime), headersEnd + minBarWidthPx);\n    const start = timeToPixel(startTime);\n    const end = Math.max(timeToPixel(endTime), finish);\n\n    return {sendStart, headersEnd, finish, start, end};\n  }\n\n  /**\n   * Decorates the entry:\n   *   Draw a waiting time between |sendStart| and |headersEnd|\n   *     By adding a extra transparent white layer\n   *   Draw a whisk between |start| and |sendStart|\n   *   Draw a whisk between |finish| and |end|\n   *     By draw another layer of background color to \"clear\" the area\n   *     Then draw the whisk\n   *   Draw the URL after the |sendStart|\n   *\n   *   |----------------[ (URL text)    waiting time   |   request  ]--------|\n   *   ^start           ^sendStart                     ^headersEnd  ^Finish  ^end\n   * @param index\n   * @param context\n   * @param barX The x pixel of the visible part request\n   * @param barY The y pixel of the visible part request\n   * @param barWidth The width of the visible part request\n   * @param barHeight The height of the visible part request\n   * @param unclippedBarX The start pixel of the request compare to the visible area. It is calculated with request.beginTime() in FlameChart.\n   * @param timeToPixelRatio\n   * @returns if the entry needs to be decorate, which is alway true if the request has \"timing\" field\n   */\n  decorateEntry(\n      index: number, context: CanvasRenderingContext2D, _text: string|null, barX: number, barY: number,\n      barWidth: number, barHeight: number, unclippedBarX: number, timeToPixelRatio: number): boolean {\n    const request = (this.#requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    if (!request.timing) {\n      return false;\n    }\n\n    const {sendStart, headersEnd, finish, start, end} =\n        this.getDecorationPixels(request, unclippedBarX, timeToPixelRatio);\n\n    // Draw waiting time.\n    context.fillStyle = 'hsla(0, 100%, 100%, 0.8)';\n    context.fillRect(sendStart + 0.5, barY + 0.5, headersEnd - sendStart - 0.5, barHeight - 2);\n    // Clear portions of initial rect to prepare for the ticks.\n    context.fillStyle = ThemeSupport.ThemeSupport.instance().getComputedValue('--color-background');\n    context.fillRect(barX, barY - 0.5, sendStart - barX, barHeight);\n    context.fillRect(finish, barY - 0.5, barX + barWidth - finish, barHeight);\n\n    // Draws left and right whiskers\n    function drawTick(begin: number, end: number, y: number): void {\n      const /** @const */ tickHeightPx = 6;\n      context.moveTo(begin, y - tickHeightPx / 2);\n      context.lineTo(begin, y + tickHeightPx / 2);\n      context.moveTo(begin, y);\n      context.lineTo(end, y);\n    }\n\n    context.beginPath();\n    context.lineWidth = 1;\n    context.strokeStyle = '#ccc';\n    const lineY = Math.floor(barY + barHeight / 2) + 0.5;\n    const leftTick = start + 0.5;\n    const rightTick = end - 0.5;\n    drawTick(leftTick, sendStart, lineY);\n    drawTick(rightTick, finish, lineY);\n    context.stroke();\n\n    if (typeof request.priority === 'string') {\n      const color = this.#colorForPriority(request.priority);\n      if (color) {\n        context.fillStyle = color;\n        context.fillRect(sendStart + 0.5, barY + 0.5, 3.5, 3.5);\n      }\n    }\n\n    // Draw request URL as text\n    const textStart = Math.max(sendStart, 0);\n    const textWidth = finish - textStart;\n    const /** @const */ minTextWidthPx = 20;\n    if (textWidth >= minTextWidthPx) {\n      let title = this.entryTitle(index) || '';\n      if (request.fromServiceWorker) {\n        title = 'âš™ ' + title;\n      }\n      if (title) {\n        const /** @const */ textPadding = 4;\n        const /** @const */ textBaseline = 5;\n        const textBaseHeight = barHeight - textBaseline;\n        const trimmedText = UI.UIUtils.trimTextEnd(context, title, textWidth - 2 * textPadding);\n        context.fillStyle = '#333';\n        context.fillText(trimmedText, textStart + textPadding, barY + textBaseHeight);\n      }\n    }\n\n    return true;\n  }\n\n  forceDecoration(_index: number): boolean {\n    return true;\n  }\n\n  prepareHighlightedEntryInfo(index: number): Element|null {\n    const /** @const */ maxURLChars = 80;\n    const request = (this.#requests[index] as TimelineModel.TimelineModel.NetworkRequest);\n    if (!request.url) {\n      return null;\n    }\n    const element = document.createElement('div');\n    const root = UI.Utils.createShadowRootWithCoreStyles(element, {\n      cssFile: [timelineFlamechartPopoverStyles],\n      delegatesFocus: undefined,\n    });\n    const contents = root.createChild('div', 'timeline-flamechart-popover');\n    const startTime = request.getStartTime();\n    const duration = request.endTime - startTime;\n    if (startTime && isFinite(duration)) {\n      contents.createChild('span', 'timeline-info-network-time').textContent =\n          i18n.TimeUtilities.millisToString(duration, true);\n    }\n    if (typeof request.priority === 'string') {\n      const div = (contents.createChild('span') as HTMLElement);\n      div.textContent =\n          PerfUI.NetworkPriorities.uiLabelForNetworkPriority((request.priority as Protocol.Network.ResourcePriority));\n      div.style.color = this.#colorForPriority(request.priority) || 'black';\n    }\n    contents.createChild('span').textContent = Platform.StringUtilities.trimMiddle(request.url, maxURLChars);\n    return element;\n  }\n\n  #colorForPriority(priority: string): string|null {\n    if (!this.#priorityToValue) {\n      this.#priorityToValue = new Map([\n        [Protocol.Network.ResourcePriority.VeryLow, 1],\n        [Protocol.Network.ResourcePriority.Low, 2],\n        [Protocol.Network.ResourcePriority.Medium, 3],\n        [Protocol.Network.ResourcePriority.High, 4],\n        [Protocol.Network.ResourcePriority.VeryHigh, 5],\n      ]);\n    }\n    const value = this.#priorityToValue.get(priority);\n    return value ? `hsla(214, 80%, 50%, ${value / 5})` : null;\n  }\n\n  #appendTimelineData(): void {\n    if (this.#legacyTimelineModel) {\n      this.#minimumBoundaryInternal = this.#legacyTimelineModel.minimumRecordTime();\n      this.#maximumBoundary = this.#legacyTimelineModel.maximumRecordTime();\n      this.#timeSpan =\n          this.#legacyTimelineModel.isEmpty() ? 1000 : this.#maximumBoundary - this.#minimumBoundaryInternal;\n      this.#legacyTimelineModel.networkRequests().forEach(this.#appendEntry.bind(this));\n      this.#updateTimelineData();\n    }\n  }\n\n  #updateTimelineData(): void {\n    if (!this.#timelineDataInternal) {\n      return;\n    }\n    const lastTimeByLevel = [];\n    let maxLevel = 0;\n    for (let i = 0; i < this.#requests.length; ++i) {\n      const r = this.#requests[i];\n      const beginTime = r.beginTime();\n      const startTime = (this.#startTime as number);\n      const endTime = (this.#endTime as number);\n      const visible = beginTime < endTime && r.endTime > startTime;\n      if (!visible) {\n        this.#timelineDataInternal.entryLevels[i] = -1;\n        continue;\n      }\n      while (lastTimeByLevel.length && lastTimeByLevel[lastTimeByLevel.length - 1] <= beginTime) {\n        lastTimeByLevel.pop();\n      }\n      this.#timelineDataInternal.entryLevels[i] = lastTimeByLevel.length;\n      lastTimeByLevel.push(r.endTime);\n      maxLevel = Math.max(maxLevel, lastTimeByLevel.length);\n    }\n    for (let i = 0; i < this.#requests.length; ++i) {\n      if (this.#timelineDataInternal.entryLevels[i] === -1) {\n        this.#timelineDataInternal.entryLevels[i] = maxLevel;\n      }\n    }\n    this.#timelineDataInternal = PerfUI.FlameChart.FlameChartTimelineData.create({\n      entryLevels: this.#timelineDataInternal.entryLevels,\n      entryTotalTimes: this.#timelineDataInternal.entryTotalTimes,\n      entryStartTimes: this.#timelineDataInternal.entryStartTimes,\n      groups: [this.#group],\n    });\n    this.#maxLevel = maxLevel;\n  }\n\n  #appendEntry(request: TimelineModel.TimelineModel.NetworkRequest): void {\n    this.#requests.push(request);\n    this.#timelineDataInternal.entryStartTimes.push(request.beginTime());\n    this.#timelineDataInternal.entryTotalTimes.push(request.endTime - request.beginTime());\n    this.#timelineDataInternal.entryLevels.push(this.#requests.length - 1);\n  }\n\n  preferredHeight(): number {\n    return this.#style.height * (this.#group.expanded ? Platform.NumberUtilities.clamp(this.#maxLevel + 1, 4, 8.5) : 1);\n  }\n\n  isExpanded(): boolean {\n    return this.#group && Boolean(this.#group.expanded);\n  }\n\n  formatValue(value: number, precision?: number): string {\n    return i18n.TimeUtilities.preciseMillisToString(value, precision);\n  }\n\n  canJumpToEntry(_entryIndex: number): boolean {\n    return false;\n  }\n\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  navStartTimes(): Map<any, any> {\n    if (!this.#legacyTimelineModel) {\n      return new Map();\n    }\n\n    return this.#legacyTimelineModel.navStartTimes();\n  }\n}\n"]}